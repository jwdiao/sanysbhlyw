(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{360:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABNCAYAAAAB1fLJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDM4NURCMUQ1RTVFMTFFOUEyOEM4Rjg3QTRCMDU0NzciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDM4NURCMUU1RTVFMTFFOUEyOEM4Rjg3QTRCMDU0NzciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0Mzg1REIxQjVFNUUxMUU5QTI4QzhGODdBNEIwNTQ3NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0Mzg1REIxQzVFNUUxMUU5QTI4QzhGODdBNEIwNTQ3NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhsOZnkAAAu5SURBVHja3FwLmFVVFd53GEhkQBQiBxnQGQKZeM1YFAgoH5UOQ0QyCulYlEmSflmkkEb1ie9eZEWkQQ9FBCFLUUChABkeaqCAMqaJ2kNJRdAEQoXp/73rfCy2597zuPvcucz6vvXte88+Z+91/rP23muvtc5JmQKil8wJ7VBsBh8Dru5qXt9VKLIVmcKiM8G9wN3B5xeSYIUG1DD1+/OFJFhxMwyv41F8Avxx0Z7e4KUYZt9FOVSdOhjnnoyyPfjn711qzDPgv4Ifw/n/aXFA4YarUIwFjwEPtKpfJeMczksfteomgO8FdwWfYbXZiGIF+E/ghwHcwSTvIZUgOB1RfEm4n1W9H7wYPB+8Ejf5Ls6nNq21ztuGuv7SXj8B+3PgKus8atc88G04/5mjAijcUCmKK8CTwCVW9d9kGN2BG3rTuu4qFDf4NNkX5z5lncvh+mXhzqqqCbwMfC2u2ViQQEH4Diimgr8JPtaqptDX8iZwA00Zrl+Kosan6npcMz3DNRyu9eBvgyus6gcpD67dWjBAQeA6FD8Dl1pVm8DTIOyfA67n6vs6+Dif6h24viLg+mIxJ2aAe1ga9kvw1bYG5xUoCHgCijkyb2jaKcNvfiYNstrhPLQlyymDwwwl0TBqNFfQtkdUGTMRbazIux0FoYaj2GqBRFBmccmHUHeGAUloaED9hDCNoL//gW/Ez0rwqiOqjHkIMt8s2pcfoNDZJVytwCepw//gEg5BL4uh5sMC6s9Dn63CNob+X0AxUrTrHVU1VQA7PlGg0EEKPBM/Z4Nbq6p7aB9BwLUxFTRIo0ple2MigNUE/qm0/U9VNYKLC+6jWyJAyRP9Lfgb6vAh8HfAdRBqd0ztpPUdRuhYWxrI9SiKQWLRe9RLwOrpFChqkoD0RXX4AHg8BLkhwlwUR5s8Ggc5PhATrJ1i2evJnNPGarTZ3aVG0Ui80LKsR0GAxQ6si7BA0dI/K24nkHUfitHcV1pgLZddRG5AoREOtUvVIXY4Ah3/JQGPQRDl5HqBzG+jONfaKvUB3x20WKQCQPq0bAk8QLmC1OZij/jYYVGcc9TkLuj/LQf70A3gU9XhGWj3+5E1SvZs86xzLnIFktDpEc+nEfnZXDvFPeyRdt5Qh6fjngdHAkom79+DP6gO/wgd3OF4Dz00xjVOHHriZfiKhcXtYt2H1ii6Rj6l/q8DX5WA92K4lFulzzB0lgxZF2BxMfqNOtRTNtjBcxSEoBY9DfaE2Ut/Ehp93rE7pq2o/m6xc2gU/stnY+1HkyHPrxz6zbarfg/IFuzFII36ngKJdKVrkIToitkhe8UzZJ/4h5DXTnAlhMxXU9Qh2mrXZNUosVS3q+0J3SSD0NghkxChz3NM2ts5RPp9OMRlBLUMcv3bkQwpmV68yZxu5UrtLbU1apq1h7s8YZA+JitrSjSrwdqXZTNrXGoVgb9aHaJN9S3foQehT7Ss7/vRwLoEQaKDbYnyG9WJwIvyufopsFbLg/LoQsjYyU+jLpLx6dF1CYJET+YD4A+pw+USrQkL1Gk4v5dj0WZaNlu9H1D16ncDEH4kIZCo1gvBH/Gp5nz1SMjh53RSF2JoTM97XzgCKAh/mmXOzzbJ0S+ybG7PjTj8znc8/DiJ364OVXta62lUnap8M8IyHVWbOEFekuWU3jinMgJQPL/asZh3Wf9Ha6BGqIr7gOyBBEBi8PIHYfxOMvxebI7hh3vfJvadR7XvAYUbYJBSh7L/mABIHNrzQ/q/vOG3ICxQEu5yScvUb+ZAFBfJxrSVMrRWOgapzDIDgqgfrqmIMPzKYnghgmiltfpVF1mrz+O5BgotkNoLSKURL6VWbbKGQN4mdZOObGuqKrJWu40OQfLMgAExLh8nZVitqkN/rR3OUzstE6UPgdJG2xMOnwpD7DUxrmNovac4/cMCxUSNkY61SieG9CZQOgqx3ZE2fR3F1yJexnDSEDzNTmAGKF+OOPwucAxUo/p9EoHSqTk7HIA02toKhCEGKhhl3qDU/50Mdk0mGis+Llekh96JBKq9/DmUa7qf7NUWmGgRaD65cySc5EdhzZUSzzh0RHor07FIbYT/myNIjJHdD24X4TJOmjUA6Y0s5zwOfrcZPAqvqd+t9ZPfkwNIJQJS1wiX7ROrt03AkIminbXimXBBe2whPLvprZggtRKre2CEy+gMPM+kM2AYuR2b5VyuZmFTddqIB8IFHbKB2utXEYF+DP5MxGsuAzMLjxm9dD9f5xdZwTEu+7dEbNvV8NOG916tUR1iaBND7ZdHvOyHYEZQfqe2HuUmnV0yXoaxRwRvrmhsY8iHORJtdAGPAk8Xf3gc0nmou4pll9474iRMkEaJURmFaEDSL389eLxV92FZMZlKzR38JuHV7IceDRyn8P1lmFcJM636GGuUjJdFigm2p+C6STHy0PVwf4mJYbPEONyLxkpCgkRh15n3p0dnI57/STEM50QUmqueBo+8VcArlgddpZg5CpNkDiySB1QvSRphFYHB2TXydwE7eVL+tGMwUOJc2RoolRUuCkjPmnSsf5gMOxPj6XogeGFwW/PIi7QvDfWcBxnxZgZLCbOXs9hrNul0gkYKsFkdqJAOM4F0rIBUFtEeqREPwmLj7rWSMODph04ZlqF+TIDd5gfUliIBar+aVIPMgCiuV7Y7RlbWB+IsGDHBI3CzRZM0cTitlLSBINJ74PVFsqdaqybUTHSziZZywxWKccItAlJ3UxhEb+6qEMmunrxPA6NXPavXc31WZ9CmrxorchqCrhQ76a6IWpgPorNydUCya6WUS/X24B4pT/cBiaGlWREFuRVP4ScozxbHYJMpPKoQsPr63HNK+en4sA8naaCyQYAq97JXpJF1MeaWDTLcnpSh95qyfzy27Z/mIsrGxN3HFBY0N5j6xDSkHsy/0CvQHAGKGR3PSy5C3Al4sDmcGULqj87Wc1JUwnj2jwaPE3GnPAPVWSZ4roZr1DxGmuslqWig7jaSbSZmwH05TsCvyPi+V9lqRjnmaEQ+JXynArCbD3jlCYPVQUwH2llLxfzhIvdr74RUhvFJS3ZcjA4JyBIB+VFXKUPyLuAABdxAmZDbOAaM4NTLPZTp/Cg/oGgGTI3Q8BoBZom8rJMXkqhLH0vzWHbMsWk+XO4N5+qDdsbdxShuC2hol8xdtNAfdBkHdARgDws4co8YTU3Bvc18H1Dy8vOqDFuMRgGGKrk+6TfCEwCvow94lSG2U3ylbpY9mZ+t/nOibVBD6u/mKCbZ6K8W9sDj/NbXWjgGWKt8rWdDaqBmyp6MNtRyNi6W6z7TAklcLpu1U0AWsnIBrUI28aFUdgV4p2SjtEhiMAK8Hrww23lBEQ5uQ7pwZUNDtS0QJLqaHxLjeE2ujV0DbgIfBE9tQSCdzM+WyL3Nc9Egk80WSYPkhQ5jZ80FEpPDXpb7aXAWiucKAV6lwHoOPOgoBWky+G25j206lzwbpSJ04LmBvXxP2lI3mfR3UA4cBQAREPrrvcReZu6cSaecU6AUWAwp6YAn3RGTJfO/UEGiZ/ZWc/gFAPrTa8KCFBko6ZS+c2b3TrGqmHLNj8bsKCCAKsQ+1A+WRjRDV5GSUlI5CHGBqHKJtUnmi4I32u+75RkgRnz4IiZz2lurzS4DojPieDVSDp4YM/2HWFUHRcNuEYddvgDi/o3Zfvw+g/aeMilsYi5v1qccCEej9WKZ2P1cHJzD+H4yg5PPJQAO0xiZwcL3VoZb1U0yN01r1s8i+awqVPdLTWZfOB17K2RzuhHCvxKjn7ayF+Nbo/zcwLAMXgD2cYXkgeZMSXy6jclkzHBhiOu4wNPTLhxqGvMEdssmfL9srwh4Z1mtTjHpyAidddk+5sCtyE0AaLnL+0ryY4Cc5JksNtFE+1pGHGLKNbchc119qi1vQFmgMWDA0HqNzCMuQusvmPR37Kg5y5I2evMClM/kz5gevY0MEJxq0rmf3cTU0AlcdCDSKGRSLM2NbcJPAJhn8yn3/wUYAAswfr9X7S/rAAAAAElFTkSuQmCC"},416:function(e,t,a){e.exports=a(886)},622:function(e,t,a){},625:function(e,t,a){e.exports=a.p+"static/media/404.1de77d84.png"},714:function(e,t,a){e.exports=a.p+"static/media/pcbg.df0fee4d.png"},886:function(e,t,a){"use strict";a.r(t);a(417),a(427);var n=a(0),r=a.n(n),i=a(10),l=a.n(i),o=(a(622),a(623),a(412)),c=a(21),s=a(22),u=a(24),d=a(23),p=a(25),m=a(413),f=a.n(m),h=a(176),g=a(133),b=a(15),y=a(16);function v(){var e=Object(b.a)(["\n  width:34%;\n  margin:0 auto;\n  margin-top:30%;\n"]);return v=function(){return e},e}function C(){var e=Object(b.a)(["\n  display:flex;\n  width:100%;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return C=function(){return e},e}function k(){var e=Object(b.a)(["\n  width:100%;\n  background:#fff;\n  height: 100vh;\n"]);return k=function(){return e},e}var O=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(w,null,r.a.createElement(x,null,r.a.createElement(j,{alt:"",src:a(625)}),r.a.createElement("p",null,"\u60a8\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728\uff01")))}}]),t}(n.Component),w=y.a.div(k()),x=y.a.div(C()),j=y.a.img(v()),E=(a(70),a(18)),S=(a(87),a(14)),N=(a(59),a(31)),D=a(5),T=a.n(D),F=(a(53),a(9)),I=a(13),V=[{key:"baseDataManage",title:"\u57fa\u7840\u6570\u636e\u7ba1\u7406",icon:"&#xe60b;",subMenu:[{key:"/admin/ammeterInfo",title:"\u7535\u8868\u4fe1\u606f\u7ef4\u62a4"},{key:"/admin/craftType",title:"\u5de5\u827a\u7c7b\u578b\u7ef4\u62a4"},{key:"/admin/workCenter",title:"\u5de5\u4f5c\u4e2d\u5fc3\u7ef4\u62a4"},{key:"/admin/deviceType",title:"\u751f\u4ea7\u8bbe\u5907\u7c7b\u578b"},{key:"/admin/deviceInfo",title:"\u751f\u4ea7\u8bbe\u5907\u4fe1\u606f"},{key:"/admin/partsType",title:"\u52a0\u5de5\u96f6\u4ef6\u7c7b\u578b"},{key:"/admin/partsInfo",title:"\u52a0\u5de5\u96f6\u4ef6\u4fe1\u606f"}]},{key:"businessManage",title:"\u4e1a\u52a1\u7ba1\u7406",icon:"team",subMenu:[{key:"/admin/producePaln",title:"\u751f\u4ea7\u8ba1\u5212\u6392\u7a0b"}]}],L=[{key:"baseDataManage",title:"\u57fa\u7840\u6570\u636e\u7ba1\u7406",icon:"team",subMenu:[{key:"/admin/ammeterInfo",title:"\u7535\u8868\u4fe1\u606f\u7ef4\u62a4"},{key:"/admin/deviceType",title:"\u751f\u4ea7\u8bbe\u5907\u7c7b\u578b"},{key:"/admin/deviceInfo",title:"\u751f\u4ea7\u8bbe\u5907\u4fe1\u606f"},{key:"/admin/partsType",title:"\u52a0\u5de5\u96f6\u4ef6\u7c7b\u578b"},{key:"/admin/partsInfo",title:"\u52a0\u5de5\u96f6\u4ef6\u4fe1\u606f"}]},{key:"businessManage",title:"\u4e1a\u52a1\u7ba1\u7406",icon:"team",subMenu:[{key:"/admin/producePaln",title:"\u751f\u4ea7\u8ba1\u5212\u6392\u7a0b"}]}],M=[{key:"invalid",value:"0",label:"\u65e0\u6548"},{key:"valid",value:"1",label:"\u6709\u6548"}],P=[{key:"all",value:"2",label:"\u5168\u90e8"},{key:"invalid",value:"0",label:"\u65e0\u6548"},{key:"valid",value:"1",label:"\u6709\u6548"}];var R=a(36),q=a(94),A=F.a.error;q.defaults.baseURL="http://10.88.1.31:9099",q.defaults.headers.post["Content-Type"]="application/json",q.interceptors.request.use(function(e){var t=W.get("user");return t&&t.token&&(e.headers.token="".concat(t.token)),"get"===e.method&&(e.params=Object(R.a)({t:Date.parse(new Date)},e.params)),e},function(e){return console.log("axios rejected: "+e),Promise.reject(e)}),q.interceptors.response.use(function(e){if(!(e.status>=400&&e.status<500))return 1012===e.data.code?(F.a.error("\u767b\u5f55\u4fe1\u606f\u5df2\u8fc7\u671f\uff01\u8bf7\u91cd\u65b0\u767b\u5f55\u3002"),W.remove("user"),W.remove("selectedTabKey"),window.location.href="".concat(window.location.protocol,"//").concat(window.location.host,"/").concat("sanysbhlyw/"),Promise.reject(e.data.msg)):e;window.location.href=decodeURI("".concat(window.location.protocol,"//").concat(window.location.host,"/404.html"))},function(e){console.log("axios rejected: "+e)});var U={get:null,post:null,all:null};U.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q.get(e,{params:t,validateStatus:function(e){return e>=200&&e<300}}).then(function(t){var a=t.data.ret,n=t.data.msg;return"201"===a?(console.log("axios Get method error code: "+e+", error code: "+a),A(n,1),null):t.data}).catch(function(t){console.log("axios Get method exception: "+e+", error: "+t)})},U.post=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q.post(e,t).then(function(t){var a=t.data.code,n=t.data.msg;return"201"===a?(console.log("axios Get method error code: "+e+", error code: "+a),A(n,1),null):t.data}).catch(function(t){console.log("axios Post method exception: "+e+", error: "+t)})},U.postFormData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return q.post(e,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return console.log("postFormData response: ",e),e.data}).catch(function(e){console.log("postFormData error:",e)})},U.download=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q.post(e,t,{responseType:"blob"}).then(function(e){return console.log("download response",e),console.log("download response headers",e.headers["content-disposition"]),e.data}).catch(function(t){console.log("axios Post method exception: "+e+", error: "+t)})},U.all=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return q.all(e).then(function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var l=r.value.code;(l>220||l<200)&&console.log("axios asyncAll method error code: "+l)}}catch(o){a=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return e}).catch(function(e){console.log("axios asyncAll method exception error: "+e)})},U.uploadFile=function(e,t,a){return q.post(e,t,{onUploadProgress:a})};var z=U,K=a(95),G=a.n(K),B={encryptBy3DES:null,decryptBy3DES:null};B.encryptBy3DES=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sanyshblyw",a=G.a.enc.Utf8.parse(t);return G.a.DES.encrypt(e,a,{mode:G.a.mode.ECB,padding:G.a.pad.Pkcs7}).toString()},B.decryptBy3DES=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sanyshblyw",a=G.a.enc.Utf8.parse(t);return G.a.DES.decrypt({ciphertext:G.a.enc.Base64.parse(e)},a,{mode:G.a.mode.ECB,padding:G.a.pad.Pkcs7}).toString(G.a.enc.Utf8)};var Z={set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return sessionStorage.setItem(e,JSON.stringify(t))},get:function(e){try{return JSON.parse(sessionStorage.getItem(e))}catch(t){console.log("Get SessionStorage error!",t)}return!1},remove:function(e){return sessionStorage.removeItem(e)},clear:function(){return sessionStorage.clear()}},W=Z,Y=[{title:"\u5e8f\u53f7",dataIndex:"index",width:"5%",editable:!1},{title:"\u8bbe\u5907\u7f16\u53f7",dataIndex:"machineNumber",width:"10%",editable:!0},{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"machineName",width:"15%",editable:!1},{title:"\u96f6\u4ef6\u7c7b\u578b\u7f16\u53f7",dataIndex:"partTypeCode",width:"10%",editable:!1},{title:"\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0",dataIndex:"partTypeName",width:"15%",editable:!1},{title:"\u96f6\u4ef6\u7f16\u53f7",dataIndex:"partCode",width:"10%",editable:!0},{title:"\u96f6\u4ef6\u540d\u79f0",dataIndex:"partName",width:"15%",editable:!1},{title:"\u662f\u5426\u6709\u6548",dataIndex:"isValid",width:"10%",editable:!1}],J=[{title:"\u5e8f\u53f7",dataIndex:"index",width:"5%",editable:!1},{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"machineName",width:"10%",editable:!1},{title:"\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0",dataIndex:"partTypeName",width:"10%",editable:!1},{title:"\u96f6\u4ef6\u540d\u79f0",dataIndex:"partName",width:"10%",editable:!1},{title:"\u7a0b\u5e8f\u540d\u79f0",dataIndex:"stepName",width:"10%",editable:!1},{title:"\u5de5\u5e8f\u53f7",dataIndex:"procedureNumber",width:"10%",editable:!0},{title:"\u5de5\u5e8f\u540d\u79f0",dataIndex:"procedureName",width:"10%",editable:!1},{title:"\u751f\u4ea7\u65f6\u95f4(\u5206)",dataIndex:"procedureProduceDuration",width:"10%",editable:!1},{title:"\u6700\u77ed\u65f6\u95f4(\u5206)",dataIndex:"procedureMinimumDuration",width:"10%",editable:!1},{title:"\u662f\u5426\u6709\u6548",dataIndex:"isValid",width:"10%",editable:!1}],H=[{title:"\u5e8f\u53f7",dataIndex:"index",width:"5%",editable:!1},{title:"\u5f52\u5c5e\u5de5\u827a",dataIndex:"belongingTechnique",width:"9%",editable:!1},{title:"\u5f52\u5c5e\u5de5\u4f5c\u4e2d\u5fc3",dataIndex:"belongingCenterName",width:"9%",editable:!1},{title:"\u8bbe\u5907\u7c7b\u578b",dataIndex:"deviceTypeName",width:"9%",editable:!0},{title:"\u8bbe\u5907\u7f16\u53f7",dataIndex:"deviceNumber",width:"9%",editable:!1},{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"deviceName",width:"9%",editable:!1},{title:"\u8bbe\u5907\u578b\u53f7",dataIndex:"deviceModel",width:"9%",editable:!1},{title:"plc\u7c7b\u578b",dataIndex:"plcType",width:"9%",editable:!1},{title:"\u8bbe\u5907\u5355\u4f4d",dataIndex:"deviceUnit",width:"9%",editable:!1},{title:"\u6709\u6548\u72b6\u6001",dataIndex:"isValid",width:"5%",editable:!1}],Q=[{title:"\u5e8f\u53f7",dataIndex:"index",width:"10%",editable:!1},{title:"\u7535\u8868\u7f16\u53f7",dataIndex:"meterNumber",width:"20%",editable:!1}],X=[{title:"\u5e8f\u53f7",dataIndex:"num"},{title:"\u7535\u8868\u7f16\u53f7",dataIndex:"deviceId"},{title:"\u662f\u5426\u6709\u6548",dataIndex:"isFlag",render:function(e){return"1"===e?"\u6709\u6548":"\u65e0\u6548"}}],_=[{title:"\u5e8f\u53f7",dataIndex:"num",key:"num",align:"center"},{title:"\u8bbe\u5907\u7c7b\u578b\u7f16\u53f7",dataIndex:"deviceTypeCode",key:"deviceTypeCode",align:"center"},{title:"\u8bbe\u5907\u7c7b\u578b\u540d\u79f0",dataIndex:"deviceTypeName",key:"deviceTypeName",align:"center"},{title:"\u662f\u5426\u6709\u6548",dataIndex:"isFlag",key:"isFlag",align:"center",render:function(e){return"1"===e?"\u6709\u6548":"\u65e0\u6548"}}],$=[{title:"\u5e8f\u53f7",dataIndex:"num",key:"num",align:"center"},{title:"\u65e5\u671f",dataIndex:"planDate",key:"planDate",align:"center"},{title:"\u8bbe\u5907\u7f16\u53f7",dataIndex:"machineNo",key:"machineNo",align:"center"},{title:"\u8bbe\u5907\u540d\u79f0",dataIndex:"machineName",key:"machineName",align:"center"},{title:"\u52a0\u5de5\u96f6\u4ef6\u7c7b\u578b",dataIndex:"partTypeName",key:"partTypeName",align:"center"},{title:"\u52a0\u5de5\u96f6\u4ef6\u540d\u79f0",dataIndex:"partName",key:"partName",align:"center"},{title:"\u8ba1\u5212\u751f\u4ea7(\u767d)",dataIndex:"planNumDay",key:"planNumDay",align:"center"},{title:"\u5b8c\u6210\u751f\u4ea7(\u767d)",dataIndex:"overNumDay",key:"overNumDay",align:"center"},{title:"\u8ba1\u5212\u751f\u4ea7(\u591c)",dataIndex:"planNumNight",key:"planNumNight",align:"center"},{title:"\u5b8c\u6210\u751f\u4ea7(\u591c)",dataIndex:"overNumNight",key:"overNumNight",align:"center"},{title:"\u662f\u5426\u6709\u6548",dataIndex:"isFlag",key:"isFlag",align:"center",render:function(e){return"1"==e?"\u6709\u6548":"\u65e0\u6548"}}],ee=[{title:"\u5e8f\u53f7",dataIndex:"num",key:"num",align:"center"},{title:"\u96f6\u4ef6\u7c7b\u578b\u7f16\u53f7",dataIndex:"partTypeCode",key:"partTypeCode",align:"center"},{title:"\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0",dataIndex:"partTypeName",key:"partTypeName",align:"center"},{title:"\u662f\u5426\u6709\u6548",dataIndex:"isFlag",key:"isFlag",align:"center",render:function(e){return"1"==e?"\u6709\u6548":"\u65e0\u6548"}}],te=[{title:"\u5e8f\u53f7",dataIndex:"num",key:"num",align:"center"},{title:"\u5de5\u4f5c\u4e2d\u5fc3\u7f16\u53f7",dataIndex:"workCenterCode",key:"workCenterCode",align:"center"},{title:"\u5de5\u4f5c\u4e2d\u5fc3\u540d\u79f0",dataIndex:"workCenterName",key:"workCenterName",align:"center"},{title:"\u662f\u5426\u6709\u6548",dataIndex:"isFlag",key:"isFlag",align:"center",render:function(e){return"1"==e?"\u6709\u6548":"\u65e0\u6548"}}],ae=z.get,ne=z.post,re=z.download,ie=z.uploadFile,le=function(e,t){return ne("/sanyBasicUser/login",{loginAccount:e,loginPwd:t})},oe=function(e){return ne("/electricity/saveElectricityInfo",{id:e.id,deviceId:e.deviceId,isFlag:e.isFlag})},ce=function(e,t){return ne("/electricity/setFlagForElectricityInfo",{ids:e,isFlag:t})},se=function(e){return ae("/basicCompanyGroup/find/"+e)},ue=function(e){return ae("/basicCompanyGroup/finnd/all/"+e)},de=function(e){return ne("/basicCompanyGroup/save",e)},pe=function(e){return ne("/basicCompanyCenter/findlist",e?{workCenterName:e.workCenterName,isFlag:e.isFlag}:{})},me=function(e){return e.id?ne("/basicCompanyCenter/saveCenter",{id:e.id,isFlag:e.isFlag,workCenterCode:e.workCenterCode,workCenterName:e.workCenterName}):ne("/basicCompanyCenter/saveCenter",{isFlag:e.isFlag,workCenterCode:e.workCenterCode,workCenterName:e.workCenterName})},fe=function(e,t){return ne("/basicCompanyCenter/setFlagForCenter",{ids:e,isFlag:t})},he=function(e){return ne("/productType/find/all",e?{pageNum:e.pageNum,pageSize:e.pageSize,query:{partTypeName:e.query.partTypeName,isFlag:e.query.isFlag,machineNo:e.query.machineNo}}:{})},ge=function(e){return e.id?ne("/productType/save",{id:e.id,partTypeCode:e.partTypeCode,partTypeName:e.partTypeName,isFlag:e.isFlag}):ne("/productType/save",{partTypeCode:e.partTypeCode,partTypeName:e.partTypeName,isFlag:e.isFlag})},be=function(e,t){return ne("/productType/update/isflag",{idArr:e,isFlag:t})},ye=function(e){return ne("/machineType/findlist",e?{pageNum:e.pageNum,pageSize:e.pageSize,query:{typeName:e.query.deviceTypeName,isFlag:e.query.isFlag}}:{})},ve=function(e){return ne("/machineType/saveMachineType",{id:e.id,typeCode:e.typeCode,typeName:e.typeName,isFlag:e.isFlag})},Ce=function(e,t){return ne("/machineType/setFlagForMachineType",{ids:e,isFlag:t})},ke=function(e){var t=e.companyCode,a=e.type;return ne("/basicCode/find/companycode/typecode",{compnyCode:t,typeCode:a})},Oe=function(e){return ne("/machineworkingplanMain/findByPlanDate",{pageNum:e.pageNum,pageSize:e.pageSize,query:{planDate:e.query.planDate,companyCode:e.query.companyCode}})},we=function(e){return ne("/machineworkingplanMain/save",{id:e.id,planDate:e.planDate,machineNo:e.machineNo,machineName:e.machineName,partTypeCode:e.partTypeCode,partTypeName:e.partTypeName,partCode:e.partCode,partName:e.partName,planNumDay:e.planNumDay,planNumNight:e.planNumNight,isFlag:e.isFlag})},xe=function(e){return ne("/machineInfo/findlist",{pageNum:e.pageNum,pageSize:e.pageSize,query:{isFlag:e.query.isFlag}})},je=function(e){return ne("/productInfo/find/all/distinct",{machineNo:e.machineNo,partTypeCode:e.partTypeCode})},Ee=function(e){return ne("/machineworkingplanMain/delete/ids",{idArr:e})},Se=function(e){return re("/machineworkingplanMain/download/template",{companyCode:e.companyCode,planDate:e.planDate})};function Ne(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  // border: #1DA57A solid 2px;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n"]);return Ne=function(){return e},e}function De(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  padding-right: 10%;\n  z-index: 100;\n"]);return De=function(){return e},e}function Te(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  height: 100px;overflow:hidden;\n  // border: red solid 2px;\n  justify-content: center;\n  align-items: center;\n  margin-top: 10px;\n  margin-bottom: 20px;\n  color: white;\n  font-size: xx-large;\n  z-index: 100;\n"]);return Te=function(){return e},e}function Fe(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n  // height: 400px;\n  border: rgba(63,91,184,0.2) solid 2px;\n  border-radius: 4px;\n  align-self: flex-end;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(2,11,40,0.5);\n  z-index: 100;\n"]);return Fe=function(){return e},e}function Ie(){var e=Object(b.a)(["\n  width:60%;\n  display: flex;\n  flex-direction: column;\n  animation-timing-function: ease-in-out;\n  animation-name: ",";\n  animation-duration: 2700ms;\n  animation-iteration-count: infinite;\n  animation-direction: alternate;\n  -webkit-animation-timing-function: ease-in-out;\n  -webkit-animation-name: ",";\n  -webkit-animation-duration: 2700ms;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-direction: alternate;\n"]);return Ie=function(){return e},e}function Ve(){var e=Object(b.a)(["\n    0% {\n      opacity: .2;\n    }\n\n    100% {\n      opacity: 1;\n    }\n"]);return Ve=function(){return e},e}function Le(){var e=Object(b.a)(["\n  display: flex;\n  background: -webkit-radial-gradient(circle farthest-corner at 50% 75%, #0C2A55, #000023); /* Safari 5.1 - 6.0 */\n  background: -o-radial-gradient(circle farthest-corner at 50% 75%,, #0C2A55, #000023); /* Opera 11.6 - 12.0 */\n  background: -moz-radial-gradient(circle farthest-corner at 50% 75%,, #0C2A55, #000023); /* Firefox 3.6 - 15 */\n  background: radial-gradient(circle farthest-corner at 50% 75%, #0C2A55, #000023); /* \u6807\u51c6\u7684\u8bed\u6cd5 */\n  height: 100vh;\n"]);return Le=function(){return e},e}var Me=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).clearFormFields=function(){console.log("clear input fields"),a.props.form.resetFields()},a.handleLoginSubmit=function(){var e=Object(I.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields(function(){var e=Object(I.a)(T.a.mark(function e(t,n){var r,i,l,o,c,s,u,d;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}return console.log("Received values of form: ",n),r=n.userName,i=n.password,e.next=6,le(r,i);case 6:(l=e.sent)&&200===l.code&&l.data?(o=l.data,c=o.account,s=o.companyCode,u=o.token,d={loginAccount:c,companyCode:s,token:u},W.set("user",d),a.props.history.push("/admin")):F.a.error("\u767b\u5f55\u5931\u8d25\u3002\u8bf7\u68c0\u67e5\u7528\u6237\u540d\u6216\u5bc6\u7801\u540e\u91cd\u8bd5\u3002"),e.next=11;break;case 10:F.a.error("\u767b\u5f55\u5931\u8d25\u3002\u8bf7\u68c0\u67e5\u7528\u6237\u540d\u6216\u5bc6\u7801\u540e\u91cd\u8bd5\u3002");case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.userName="",a.password="",a.state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,n=e.getFieldError,i=n("userName"),l=n("password");return r.a.createElement(Re,null,r.a.createElement(Ae,{alt:"",src:a(714)}),r.a.createElement(Ke,null,r.a.createElement(Ue,null,r.a.createElement(ze,null,r.a.createElement("img",{style:{width:"48px",marginBottom:"8px"},src:a(360),alt:""}),r.a.createElement("div",{style:{height:"50px"}},"\u8bbe\u5907\u4e92\u8054\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement(S.a,{onSubmit:this.handleLoginSubmit,style:{width:"100%",height:"200px",overflow:"hidden"}},r.a.createElement(S.a.Item,{validateStatus:i?"error":"",help:i||"",style:{marginLeft:"10%",width:"80%"}},t("userName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d!"}]})(r.a.createElement(N.a,{placeholder:"\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d",prefix:r.a.createElement("span",{className:"iconfont",style:{color:"#09B6FD"}},"\ue65a"),allowClear:!0,className:"login_input"}))),r.a.createElement(S.a.Item,{hasFeedback:!0,validateStatus:l?"error":"",help:l||"",style:{marginLeft:"10%",width:"80%"}},t("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(r.a.createElement(N.a.Password,{placeholder:"\u8f93\u5165\u60a8\u7684\u5bc6\u7801",prefix:r.a.createElement("span",{className:"iconfont",style:{color:"#09B6FD"}},"\ue777"),className:"login_input"}))),r.a.createElement(S.a.Item,null,r.a.createElement(Ge,null,r.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{width:"80%"}},"\u767b\u5f55")))),"}")))}}]),t}(n.Component),Pe=Object(g.f)(S.a.create()(Me)),Re=y.a.div(Le()),qe=Object(y.b)(Ve()),Ae=y.a.img(Ie(),qe,qe),Ue=y.a.div(Fe()),ze=y.a.div(Te()),Ke=y.a.div(De()),Ge=y.a.div(Ne()),Be=(a(771),a(403)),Ze=(a(773),a(135)),We=(a(776),a(180));function Ye(){var e=Object(b.a)(["\n  display: flex;\n  height: 50px;\n  // width: 100%;\n  background: transparent;\n  justify-content: center;\n  align-items: center;\n  // border: #b3d4fc 2px solid;\n"]);return Ye=function(){return e},e}function Je(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  background-color: rgb(25,36,51);\n"]);return Je=function(){return e},e}function He(){var e=Object(b.a)(["\n  color: #292929;\n  font-size: 22px;\n  font-weight: bold;\n  padding-left: 20px;\n"]);return He=function(){return e},e}function Qe(){var e=Object(b.a)(["\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\npadding-right: 40px;\n"]);return Qe=function(){return e},e}function Xe(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fff;\n  padding: 0;\n  height: 60px;\n"]);return Xe=function(){return e},e}var _e=We.a.Sider,$e=We.a.Content,et=Ze.b.SubMenu,tt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).loginUser=W.get("user"),a.state={collapsed:!1,selectedTabKey:"/admin/ammeterInfo",selectedTabTitle:"\u7535\u8868\u4fe1\u606f\u7ef4\u62a4",openKeys:["baseDataManage"],menuItems:[]},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a.onOpenChange=function(e){if(1!==e.length&&0!==e.length){var t=e[e.length-1];a.setState({openKeys:[t]})}else a.setState({openKeys:e})},a.getRootKeyFromChildKey=function(e){var t=[];return a.state.menuItems.forEach(function(a){a.subMenu.forEach(function(n){n.key!==e||t.push(a.key)})}),t},a.logoutFun=function(){W.remove("user"),W.remove("selectedTabKey"),a.props.history.push("/login")},a.renderIcon=function(e){return"baseDataManage"===e.key?r.a.createElement("span",{className:"iconfont menu-icon",style:{color:"#fff"}},"\ue60b"):"businessManage"===e.key?r.a.createElement("span",{className:"iconfont menu-icon",style:{color:"#fff"}},"\ue62d"):void 0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){if(console.log("layout:",W.get("user")),W.get("user")){var e=[];e="1"===(W.get("user").remark||"1")?V:L,this.setState({menuItems:e})}else this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=W.get("selectedTabKey");e&&e.key?this.setState({selectedTabKey:e.key,selectedTabTitle:e.title}):e={key:this.state.selectedTabKey,title:this.state.selectedTabTitle};var t=this.getRootKeyFromChildKey(e.key);this.onOpenChange(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedTabKey,i=t.collapsed,l=t.selectedTabTitle,o=t.menuItems;if(o.length<=0)return null;var c=o.filter(function(e){return e.subMenu.findIndex(function(e){return e.title===l})>-1})[0].title;return r.a.createElement(We.a,null,r.a.createElement(_e,{trigger:null,collapsible:!0,collapsed:i,width:"250",style:{backgroundColor:"rgb(50,65,87)"},className:"sider-box"},r.a.createElement(lt,null,r.a.createElement(ot,null,r.a.createElement(Be.a,{size:26,src:a(360)})),!i&&r.a.createElement("div",{style:{color:"#5b9fff",fontSize:"20px",marginLeft:"10px"}},"\u8bbe\u5907\u4e92\u8054\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement(Ze.b,{theme:"dark",style:{backgroundColor:"rgb(50, 65, 87)"},mode:"inline",selectedKeys:[n],openKeys:this.state.openKeys,onOpenChange:this.onOpenChange,onClick:function(t,a,n){if(W.get("user")){var r=t.item.props.children;e.setState({selectedTabKey:t.key,selectedTabTitle:r}),W.set("selectedTabKey",{key:t.key,title:r}),e.props.history.push(t.key)}else e.props.history.push("/login")}},o.map(function(t){return r.a.createElement(et,{key:t.key,title:r.a.createElement("span",null,e.renderIcon(t),r.a.createElement("span",{style:{paddingLeft:"5px"}},t.title))},t.subMenu.map(function(e){return r.a.createElement(Ze.b.Item,{key:e.key},e.title)}))}))),r.a.createElement(We.a,null,r.a.createElement(nt,null,r.a.createElement(rt,null,r.a.createElement(it,null,"".concat(c,"-").concat(l))),r.a.createElement(rt,null,r.a.createElement("div",{style:{fontSize:14,fontWeight:"normal"}},this.loginUser?this.loginUser.loginAccount:"",",\u6b22\u8fce\u60a8"),r.a.createElement("div",{style:{fontSize:16,marginLeft:20,cursor:"pointer"},onClick:this.logoutFun},r.a.createElement("span",{className:"iconfont",style:{color:"#666",fontSize:20,verticalAlign:"-4px",display:"inline-block"}},"\ue64f"),r.a.createElement("span",{style:{paddingLeft:5,verticalAlign:"middle",display:"inline-block"}},"\u9000\u51fa")))),r.a.createElement($e,{style:{margin:"20px",padding:"15px",background:"#fff",minHeight:280}},this.props.children)))}}]),t}(n.Component),at=Object(g.f)(tt),nt=y.a.div(Xe()),rt=y.a.div(Qe()),it=y.a.div(He()),lt=y.a.div(Je()),ot=y.a.div(Ye()),ct=(a(104),a(52)),st=(a(64),a(20)),ut=function(e){var t=e.disabled,a=void 0!==t&&t,n=e.customizedText,i=e.type,l=e.onClick,o="#fff",c="#48b2f7",s="#48b2f7",u="";switch(i){case"edit":o="#48b2f7",c="#fff",s="#48b2f7",u="\u7f16\u8f91";break;case"delete":o="#ff404a",c="#fff",s="#ff404a",u="\u5220\u9664";break;case"save":"\u542f\u7528"===n?(o="#828282",s="#828282"):(o="#29ad00",s="#29ad00"),c="#fff",u="\u4fdd\u5b58";break;case"cancel":o="#ff404a",c="#fff",s="#ff404a",u="\u53d6\u6d88";break;case"duplicate":o="#29ad00",c="#fff",s="#29ad00",u="\u590d\u5236";break;case"reverse":o="orange",c="#fff",s="orange",u="\u51b2\u9500"}return r.a.createElement(E.a,{className:"table-button-style",disabled:a,onClick:l,type:"default",size:"small",style:{marginLeft:"2%",marginRight:"2%",color:a?"#fff":o,backgroundColor:a?"#e3e3e3":c,borderRadius:4,borderColor:a?"#e3e3e3":s}},n||u)},dt=(a(86),a(47)),pt=st.a.Option,mt={labelCol:{span:6},wrapperCol:{span:16}},ft=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOk=function(e){var t=a.props.editDataObj,n=a.props.form.resetFields;a.props.form.validateFieldsAndScroll(function(){var e=Object(I.a)(T.a.mark(function e(r,i){var l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=7;break}return console.log("values:",i),t.key&&(i.id=t.key),e.next=5,oe(i);case 5:(l=e.sent)&&200===l.code?a.props.onOkClickedListener&&(n(),a.props.onOkClickedListener(),F.a.success(l.data)):(l&&l.code,F.a.warning(l.msg));case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleCancel=function(e){a.setState({visible:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.handleChangeValid=function(e){console.log("selected ".concat(e))},a.state={validValue:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editVisiable,a=e.editDataObj,n=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(dt.a,{title:"".concat(a.key?"\u7f16\u8f91\u7535\u8868\u4fe1\u606f":"\u65b0\u589e\u7535\u8868\u4fe1\u606f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(S.a,{layout:"horizontal"},r.a.createElement(S.a.Item,Object.assign({label:"\u7535\u8868\u7f16\u53f7"},mt),n("deviceId",{initialValue:a.deviceId||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f16\u53f7!"}]})(r.a.createElement(N.a,null))),r.a.createElement(S.a.Item,Object.assign({label:"\u662f\u5426\u6709\u6548"},mt),n("isFlag",{initialValue:a.isFlag||"1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9"},r.a.createElement(pt,{value:"1"},"\u6709\u6548"),r.a.createElement(pt,{value:"0"},"\u65e0\u6548")))))))}}]),t}(n.Component),ht=S.a.create()(ft);function gt(){var e=Object(b.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n  .ant-btn{ margin-left: 10px; }\n"]);return gt=function(){return e},e}function bt(){var e=Object(b.a)(["\n  flex:2;\n"]);return bt=function(){return e},e}function yt(){var e=Object(b.a)(["\n  margin-top: 15px;\n"]);return yt=function(){return e},e}function vt(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  // border: aqua 2px solid;\n"]);return vt=function(){return e},e}var Ct=st.a.Option,kt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).constructTableFields=function(){return X.concat(a.getOperationFields())},a.getOperationFields=function(){return[{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return r.a.createElement(ut,{type:"edit",onClick:function(e){a.addAndEditFun(t),e.stopPropagation()}})}}]},a.toggleSetValidFun=function(){var e=Object(I.a)(T.a.mark(function e(t){var n,r,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=a.state.chekboxSelectedRowKeys).length<=0)){e.next=6;break}return F.a.warning("\u8bf7\u52fe\u9009\u9700\u8981\u64cd\u4f5c\u7684\u884c\uff01"),e.abrupt("return");case 6:return r=n.join(","),e.next=9,ce(r,t);case 9:(i=e.sent)&&200===i.code?(F.a.success("\u8bbe\u7f6e\u6210\u529f"),a.setState({chekboxSelectedRowKeys:[]}),a.getListDataFun()):F.a.warning("\u8bbe\u7f6e\u5931\u8d25\uff01");case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.addAndEditFun=function(e){a.setState({editVisiable:!0,editDataObj:e})},a.onPageChange=function(e,t){a.setState(function(t){return{pagination:Object.assign({},t.pagination,{pageNum:e})}},function(){a.getListDataFun()})},a.onModalOkClickedListener=function(){a.setState({editVisiable:!1}),a.getListDataFun()},a.onModalCancelClickedListener=function(){a.setState({editVisiable:!1})},a.state={ammeterColumns:[],ammeterData:[],filterConditionObj:{ammeterId:"",isValidValue:""},pagination:{pageNum:1,pageSize:15,total:0},editVisiable:!1,editDataObj:{},chekboxSelectedRowKeys:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.constructTableFields();this.setState({ammeterColumns:e}),this.getListDataFun()}},{key:"getListDataFun",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r,i,l,o,c,s,u,d,p,m,f;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pagination,n=t.filterConditionObj,r=a.pageNum,i=a.pageSize,l=n.ammeterId,o=n.isValidValue,c={pageNum:r,pageSize:i,query:{deviceId:l,isFlag:o}},e.next=6,ne("/electricity/findlistByPage",(h=c)?{pageNum:h.pageNum,pageSize:h.pageSize,query:{deviceId:h.query.deviceId,isFlag:h.query.isFlag}}:{});case 6:(s=e.sent)&&200===s.code?(u=s.data.list,d=this.state.pagination,p=d.pageNum,m=d.pageSize,f=u.map(function(e,t){return{num:(p-1)*m+(t+1),key:e.id,deviceId:e.deviceId,isFlag:e.isFlag}}),this.setState({ammeterData:f,pagination:Object(R.a)({},a,{total:s.data.total})})):F.a.error("\u83b7\u53d6\u7535\u8868\u4fe1\u606f\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 8:case"end":return e.stop()}var h},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.ammeterColumns,n=t.ammeterData,i=t.editVisiable,l=t.editDataObj,o=t.pagination,c=t.filterConditionObj,s=t.chekboxSelectedRowKeys,u=o.pageNum,d=o.pageSize,p=o.total;console.log("pageNum:",u,"pageSize:",d,"total:",p);var m={selectedRowKeys:s,onChange:function(t,a){e.setState({chekboxSelectedRowKeys:t})}};return r.a.createElement("div",null,r.a.createElement(Et,null,r.a.createElement(Nt,null,r.a.createElement(Ot,{placeholder:"\u7535\u8868\u7f16\u53f7",onCalled:function(t){var a=t.target.value;e.setState({filterConditionObj:Object(R.a)({},c,{ammeterId:a})})}}),r.a.createElement(wt,{onCalled:function(t){e.setState({filterConditionObj:Object(R.a)({},c,{isValidValue:t})})}}),r.a.createElement(xt,{onClickCalled:function(){e.setState({pagination:Object(R.a)({},o,{pageNum:1})},function(){e.getListDataFun()})}})),r.a.createElement(Dt,null,r.a.createElement(E.a,{type:"primary",onClick:function(){return e.addAndEditFun({})}},"\u65b0\u589e"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleSetValidFun("1")}},"\u8bbe\u4e3a\u6709\u6548"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleSetValidFun("0")}},"\u8bbe\u4e3a\u65e0\u6548"))),r.a.createElement(St,null,r.a.createElement(ct.a,{className:"data-board-table",rowSelection:m,columns:a,dataSource:n,pagination:{total:p,showTotal:function(e){return"\u5171".concat(e,"\u6761")},pageSize:d,current:u,onChange:this.onPageChange,showQuickJumper:!0}})),r.a.createElement(ht,{editVisiable:i,editDataObj:l,onOkClickedListener:this.onModalOkClickedListener,onCancelClickedListener:this.onModalCancelClickedListener}))}}]),t}(n.Component),Ot=function(e){var t=e.placeholder,a=e.onCalled;return r.a.createElement(N.a,{placeholder:t,onChange:a,style:{width:"30%",marginRight:"6px"}})},wt=function(e){var t=e.onCalled;return r.a.createElement(st.a,{defaultValue:"",onChange:t,style:{width:"15%",marginRight:"6px"}},r.a.createElement(Ct,{value:""},"\u5168\u90e8"),r.a.createElement(Ct,{value:"1"},"\u6709\u6548"),r.a.createElement(Ct,{value:"0"},"\u65e0\u6548"))},xt=function(e){var t=e.onClickCalled;return r.a.createElement(E.a,{type:"primary",onClick:t},"\u67e5\u8be2")},jt=kt,Et=y.a.div(vt()),St=y.a.div(yt()),Nt=y.a.div(bt()),Dt=y.a.div(gt()),Tt=(a(372),a(115));function Ft(){var e=Object(b.a)(["\n  margin-top: 15px;\n"]);return Ft=function(){return e},e}function It(){var e=Object(b.a)(["\n  // height: 80px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  // border: aqua 2px solid;\n"]);return It=function(){return e},e}var Vt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getListDataFun=Object(I.a)(T.a.mark(function e(){var t,n,r,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=W.get("user").companyCode,e.next=3,ue(t);case 3:(n=e.sent)&&200===n.code?(r=n.data,i=r.map(function(e,t){return{num:t+1,key:e.firstGroupCode,firstGroupCode:e.firstGroupCode,firstGroupName:e.firstGroupName,isChecked:e.isChecked}}),a.setState({dataSet:i})):n&&1010===n.code||F.a.error("\u83b7\u53d6\u5de5\u827a\u7c7b\u578b\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 5:case"end":return e.stop()}},e)})),a.saveFun=Object(I.a)(T.a.mark(function e(){var t,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.dataSet,n=[],t.forEach(function(e,t){e.isChecked&&n.push(e)}),!(n.length<=0)){e.next=7;break}F.a.warning("\u8bf7\u9009\u62e9\uff01"),e.next=11;break;case 7:return e.next=9,de(n);case 9:(r=e.sent)&&200===r.code?(F.a.success("\u4fdd\u5b58\u6210\u529f\uff01"),a.getListDataFun()):F.a.error("\u4fdd\u5b58\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 11:case"end":return e.stop()}},e)})),a.onChange=function(e,t){console.log("record:",e);var n=a.state.dataSet.map(function(a,n){var r=a.isChecked;return a.key===e.key&&(r=t.target.checked),Object(R.a)({},a,{isChecked:r})});a.setState({dataSet:n})},a.state={dataSet:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getListDataFun()}},{key:"render",value:function(){var e=this,t=[{title:"\u5e8f\u53f7",dataIndex:"num",key:"num",align:"center"},{title:"\u4e00\u7ea7\u5de5\u827a\u7f16\u53f7",dataIndex:"firstGroupCode",key:"firstGroupCode",align:"center"},{title:"\u4e00\u7ea7\u5de5\u827a\u540d\u79f0",dataIndex:"firstGroupName",key:"firstGroupName",align:"center"},{title:"\u9009\u62e9\u4f7f\u7528",align:"center",key:"action",render:function(t){return r.a.createElement(Tt.a,{checked:t.isChecked,onChange:function(a){return e.onChange(t,a)}})}}],a=this.state.dataSet;return r.a.createElement("div",null,r.a.createElement(Lt,null,r.a.createElement(E.a,{type:"primary",onClick:this.saveFun},"\u4fdd\u5b58")),r.a.createElement(Mt,null,r.a.createElement(ct.a,{className:"data-board-table",dataSource:a,columns:t,pagination:{pageSize:15,showQuickJumper:!0,total:a.length,showTotal:function(e){return"\u5171".concat(e,"\u6761")}}})))}}]),t}(n.Component),Lt=y.a.div(It()),Mt=y.a.div(Ft()),Pt=st.a.Option,Rt={labelCol:{span:6},wrapperCol:{span:16}},qt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOk=function(e){var t=a.props.editDataObj,n=a.props.form.resetFields;a.props.form.validateFieldsAndScroll(function(){var e=Object(I.a)(T.a.mark(function e(r,i){var l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=6;break}return t.key&&(i.id=t.key),e.next=4,me(i);case 4:(l=e.sent)&&200===l.code?a.props.onOkClickedListener&&(n(),a.props.onOkClickedListener(),F.a.success(l.data)):(l&&l.code,F.a.warning(l.msg));case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleCancel=function(e){a.setState({visible:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.handleChangeValid=function(e){console.log("selected ".concat(e))},a.state={validValue:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editVisiable,a=e.editDataObj,n=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(dt.a,{title:"".concat(a.key?"\u7f16\u8f91\u52a0\u5de5\u4e2d\u5fc3":"\u65b0\u589e\u52a0\u5de5\u4e2d\u5fc3"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(S.a,{layout:"horizontal"},r.a.createElement(S.a.Item,Object.assign({label:"\u5de5\u4f5c\u4e2d\u5fc3\u7f16\u53f7"},Rt),n("workCenterCode",{initialValue:a.workCenterCode||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f16\u53f7!"}]})(r.a.createElement(N.a,{disabled:!!a.key}))),r.a.createElement(S.a.Item,Object.assign({label:"\u5de5\u4f5c\u4e2d\u5fc3\u540d\u79f0"},Rt),n("workCenterName",{initialValue:a.workCenterName||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0!"}]})(r.a.createElement(N.a,null))),r.a.createElement(S.a.Item,Object.assign({label:"\u662f\u5426\u6709\u6548"},Rt),n("isFlag",{initialValue:a.isFlag||"1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9"},r.a.createElement(Pt,{value:"1"},"\u6709\u6548"),r.a.createElement(Pt,{value:"0"},"\u65e0\u6548")))))))}}]),t}(n.Component),At=S.a.create()(qt);function Ut(){var e=Object(b.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n  .ant-btn{ margin-left: 10px; }\n"]);return Ut=function(){return e},e}function zt(){var e=Object(b.a)(["\nflex:2;\n"]);return zt=function(){return e},e}function Kt(){var e=Object(b.a)(["\n  margin-top: 15px;\n"]);return Kt=function(){return e},e}function Gt(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  // border: aqua 2px solid;\n"]);return Gt=function(){return e},e}var Bt=st.a.Option,Zt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).constructTableFields=function(){return te.concat(a.getOperationFields())},a.getOperationFields=function(){return[{title:"\u7f16\u8f91",key:"action",align:"center",render:function(e,t){return r.a.createElement(ut,{type:"edit",onClick:function(e){a.addAndEditFun(t),e.stopPropagation()}})}}]},a.toggleSetValidFun=function(){var e=Object(I.a)(T.a.mark(function e(t){var n,r,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=a.state.chekboxSelectedRowKeys).length<=0)){e.next=6;break}return F.a.warning("\u8bf7\u52fe\u9009\u9700\u8981\u64cd\u4f5c\u7684\u884c\uff01"),e.abrupt("return");case 6:return r=n.join(","),e.next=9,fe(r,t);case 9:(i=e.sent)&&200===i.code?(F.a.success("\u8bbe\u7f6e\u6210\u529f"),a.setState({chekboxSelectedRowKeys:[]}),a.getListDataFun()):F.a.warning("\u8bbe\u7f6e\u5931\u8d25\uff01");case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.addAndEditFun=function(e){a.setState({editVisiable:!0,editDataObj:e})},a.onModalOkClickedListener=function(){a.setState({editVisiable:!1}),a.getListDataFun()},a.onModalCancelClickedListener=function(){a.setState({editVisiable:!1})},a.state={workCenterColumns:[],listArr:[],filterConditionObj:{centerName:"",validValue:""},editVisiable:!1,editDataObj:{},chekboxSelectedRowKeys:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.constructTableFields();this.setState({workCenterColumns:e}),this.getListDataFun()}},{key:"getListDataFun",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r,i,l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.filterConditionObj,a=t.centerName,n=t.validValue,e.next=3,pe({workCenterName:a,isFlag:n});case 3:(r=e.sent)&&200===r.code?(i=r.data,l=i.map(function(e,t){return{num:t+1,key:e.id,workCenterCode:e.workCenterCode,workCenterName:e.workCenterName,isFlag:e.isFlag}}),this.setState({listArr:l})):F.a.error("\u83b7\u53d6\u5de5\u4f5c\u4e2d\u5fc3\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.workCenterColumns,n=t.listArr,i=t.filterConditionObj,l=t.editVisiable,o=t.editDataObj,c={selectedRowKeys:t.chekboxSelectedRowKeys,onChange:function(t,a){console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a),e.setState({chekboxSelectedRowKeys:t})}};return r.a.createElement("div",null,r.a.createElement(Qt,null,r.a.createElement(_t,null,r.a.createElement(Wt,{placeholder:"\u5de5\u4f5c\u4e2d\u5fc3\u540d\u79f0",onCalled:function(t){var a=t.target.value;e.setState({filterConditionObj:Object(R.a)({},i,{centerName:a})})}}),r.a.createElement(Yt,{onCalled:function(t){e.setState({filterConditionObj:Object(R.a)({},i,{validValue:t})})}}),r.a.createElement(Jt,{onClickCalled:function(){e.getListDataFun()}})),r.a.createElement($t,null,r.a.createElement(E.a,{type:"primary",onClick:function(){return e.addAndEditFun({})}},"\u65b0\u589e"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleSetValidFun("1")}},"\u8bbe\u4e3a\u6709\u6548"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleSetValidFun("0")}},"\u8bbe\u4e3a\u65e0\u6548"))),r.a.createElement(Xt,null,r.a.createElement(ct.a,{className:"data-board-table",dataSource:n,columns:a,rowSelection:c,pagination:{pageSize:15,showQuickJumper:!0,total:n.length,showTotal:function(e){return"\u5171".concat(e,"\u6761")}}})),r.a.createElement(At,{editVisiable:l,editDataObj:o,onOkClickedListener:this.onModalOkClickedListener,onCancelClickedListener:this.onModalCancelClickedListener}))}}]),t}(n.Component),Wt=function(e){var t=e.placeholder,a=e.onCalled;return r.a.createElement(N.a,{placeholder:t,onChange:a,style:{width:"30%",marginRight:"6px"}})},Yt=function(e){var t=e.onCalled;return r.a.createElement(st.a,{defaultValue:"",onChange:t,style:{width:"15%",marginRight:"6px"}},r.a.createElement(Bt,{value:""},"\u5168\u90e8"),r.a.createElement(Bt,{value:"1"},"\u6709\u6548"),r.a.createElement(Bt,{value:"0"},"\u65e0\u6548"))},Jt=function(e){var t=e.onClickCalled;return r.a.createElement(E.a,{type:"primary",onClick:t},"\u67e5\u8be2")},Ht=Zt,Qt=y.a.div(Gt()),Xt=y.a.div(Kt()),_t=y.a.div(zt()),$t=y.a.div(Ut()),ea=st.a.Option,ta={labelCol:{span:6},wrapperCol:{span:16}},aa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOk=function(e){var t=a.props.editDataObj,n=a.props.form.resetFields;a.props.form.validateFieldsAndScroll(function(){var e=Object(I.a)(T.a.mark(function e(r,i){var l,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=7;break}return t.key&&(i.id=t.key),l={id:i.id?i.id:"",isFlag:i.isFlag,typeCode:i.deviceTypeCode,typeName:i.deviceTypeName},e.next=5,ve(l);case 5:(o=e.sent)&&200===o.code?a.props.onOkClickedListener&&(n(),a.props.onOkClickedListener(),F.a.success(o.data)):(o&&o.code,F.a.warning(o.msg));case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleCancel=function(e){a.setState({visible:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.state={},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editVisiable,a=e.editDataObj,n=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(dt.a,{title:"".concat(a.key?"\u7f16\u8f91\u8bbe\u5907\u7c7b\u578b":"\u65b0\u589e\u8bbe\u5907\u7c7b\u578b"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(S.a,{layout:"horizontal"},r.a.createElement(S.a.Item,Object.assign({label:"\u8bbe\u5907\u7c7b\u578b\u7f16\u53f7"},ta),n("deviceTypeCode",{initialValue:a.deviceTypeCode||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f16\u53f7!"}]})(r.a.createElement(N.a,{disabled:!!a.key}))),r.a.createElement(S.a.Item,Object.assign({label:"\u8bbe\u5907\u7c7b\u578b\u540d\u79f0"},ta),n("deviceTypeName",{initialValue:a.deviceTypeName||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0!"}]})(r.a.createElement(N.a,null))),r.a.createElement(S.a.Item,Object.assign({label:"\u662f\u5426\u6709\u6548"},ta),n("isFlag",{initialValue:a.isFlag||"1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9"},r.a.createElement(ea,{value:"1"},"\u6709\u6548"),r.a.createElement(ea,{value:"0"},"\u65e0\u6548")))))))}}]),t}(n.Component),na=S.a.create()(aa);function ra(){var e=Object(b.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n  .ant-btn{ margin-left: 10px; }\n"]);return ra=function(){return e},e}function ia(){var e=Object(b.a)(["\n  flex:2;\n"]);return ia=function(){return e},e}function la(){var e=Object(b.a)(["\n  margin-top: 15px;\n"]);return la=function(){return e},e}function oa(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  // border: aqua 2px solid;\n"]);return oa=function(){return e},e}var ca=st.a.Option,sa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).constructTableFields=function(){return _.concat(a.getOperationFields())},a.getOperationFields=function(){return[{title:"\u7f16\u8f91",key:"action",align:"center",render:function(e,t){return r.a.createElement(ut,{type:"edit",onClick:function(e){a.addAndEditFun(t),e.stopPropagation()}})}}]},a.toggleSetValidFun=function(){var e=Object(I.a)(T.a.mark(function e(t){var n,r,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=a.state.chekboxSelectedRowKeys).length<=0)){e.next=6;break}return F.a.warning("\u8bf7\u52fe\u9009\u9700\u8981\u64cd\u4f5c\u7684\u884c\uff01"),e.abrupt("return");case 6:return r=n.join(","),e.next=9,Ce(r,t);case 9:(i=e.sent)&&200===i.code?(F.a.success("\u8bbe\u7f6e\u6210\u529f"),a.setState({chekboxSelectedRowKeys:[]}),a.getListDataFun()):F.a.warning("\u8bbe\u7f6e\u5931\u8d25\uff01");case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.addAndEditFun=function(e){a.setState({editVisiable:!0,editDataObj:e})},a.onPageChange=function(e,t){a.setState({pageNum:e},function(){a.getListDataFun()})},a.onModalOkClickedListener=function(){a.setState({editVisiable:!1}),a.getListDataFun()},a.onModalCancelClickedListener=function(){a.setState({editVisiable:!1})},a.state={deviceTypeColumns:[],listArr:[],filterConditionObj:{deviceTypeName:"",validValue:""},pagination:{pageNum:1,pageSize:15,total:0},editVisiable:!1,editDataObj:{},chekboxSelectedRowKeys:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.constructTableFields();this.setState({deviceTypeColumns:e}),this.getListDataFun()}},{key:"getListDataFun",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r,i,l,o,c,s,u,d;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pagination,n=t.filterConditionObj,r=a.pageNum,i=a.pageSize,a.total,l=n.deviceTypeName,o=n.validValue,c={pageNum:r,pageSize:i,query:{deviceTypeName:l,isFlag:o}},e.next=6,ye(c);case 6:(s=e.sent)&&200===s.code?(u=s.data.list,s.data.total,d=u.map(function(e,t){return{num:(r-1)*i+(t+1),key:e.id,deviceTypeCode:e.typeCode,deviceTypeName:e.typeName,isFlag:e.isFlag}}),this.setState({listArr:d,pagination:Object(R.a)({},a,{total:s.data.total})})):F.a.error("\u83b7\u53d6\u8bbe\u5907\u7c7b\u578b\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.deviceTypeColumns,n=t.listArr,i=t.filterConditionObj,l=t.pagination,o=t.editVisiable,c=t.editDataObj,s=t.chekboxSelectedRowKeys,u=l.pageNum,d=l.pageSize,p=l.total,m={selectedRowKeys:s,onChange:function(t,a){e.setState({chekboxSelectedRowKeys:t})}};return r.a.createElement("div",null,r.a.createElement(fa,null,r.a.createElement(ga,null,r.a.createElement(ua,{placeholder:"\u8bbe\u5907\u7c7b\u578b\u540d\u79f0",onCalled:function(t){var a=t.target.value;e.setState({filterConditionObj:Object(R.a)({},i,{deviceTypeName:a})})}}),r.a.createElement(da,{onCalled:function(t){e.setState({filterConditionObj:Object(R.a)({},i,{validValue:t})})}}),r.a.createElement(pa,{onClickCalled:function(){e.setState({pagination:Object(R.a)({},l,{pageNum:1})},function(){e.getListDataFun()})}})),r.a.createElement(ba,null,r.a.createElement(E.a,{type:"primary",onClick:function(){return e.addAndEditFun({})}},"\u65b0\u589e"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleSetValidFun("1")}},"\u8bbe\u4e3a\u6709\u6548"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleSetValidFun("0")}},"\u8bbe\u4e3a\u65e0\u6548"))),r.a.createElement(ha,null,r.a.createElement(ct.a,{className:"data-board-table",dataSource:n,columns:a,rowSelection:m,pagination:{total:p,showTotal:function(e){return"\u5171".concat(e,"\u6761")},pageSize:d,current:u,onChange:this.onPageChange}})),r.a.createElement(na,{editVisiable:o,editDataObj:c,onOkClickedListener:this.onModalOkClickedListener,onCancelClickedListener:this.onModalCancelClickedListener}))}}]),t}(n.Component),ua=function(e){var t=e.placeholder,a=e.onCalled;return r.a.createElement(N.a,{placeholder:t,onChange:a,style:{width:"30%",marginRight:"6px"}})},da=function(e){var t=e.onCalled;return r.a.createElement(st.a,{defaultValue:"",onChange:t,style:{width:"15%",marginRight:"6px"}},r.a.createElement(ca,{value:""},"\u5168\u90e8"),r.a.createElement(ca,{value:"1"},"\u6709\u6548"),r.a.createElement(ca,{value:"0"},"\u65e0\u6548"))},pa=function(e){var t=e.onClickCalled;return r.a.createElement(E.a,{type:"primary",onClick:t},"\u67e5\u8be2")},ma=sa,fa=y.a.div(oa()),ha=y.a.div(la()),ga=y.a.div(ia()),ba=y.a.div(ra()),ya=a(153),va=a(90),Ca=a.n(va),ka=(a(395),a(219)),Oa=(a(839),a(11)),wa=a(114),xa=st.a.Option,ja={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};function Ea(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})}var Sa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={visibility:!1,previewVisible:!1,previewImage:"",fileList:[],craftList:[],workCenterList:[],machineTypeList:[],meterList:[]},a.handleCancel=function(){console.log("Clicked cancel button"),a.setState({fileList:[],visibility:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.form,r=t.selectedDeviceObj,i=wa.get(r,"key"),l=a.state,o=l.fileList,c=l.craftList,s=l.workCenterList,u=l.machineTypeList;n.validateFields(function(){var e=Object(I.a)(T.a.mark(function e(t,n){var l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleSubmit called!",n),t){e.next=26;break}return a.setState({visible:!0,confirmLoading:!0}),"/machineInfo/saveElectricityInfo",l=new FormData,i&&l.append("id",r.id),l.append("firstGroupName",c.filter(function(e){return e.value===n.belongingTechnique})[0].label),l.append("firstGroupCode",n.belongingTechnique),l.append("workCenterName",s.filter(function(e){return e.value===n.belongingCenterName})[0].label),l.append("workCenterCode",n.belongingCenterName),l.append("plcType",n.plcType),l.append("machineTypeName",u.filter(function(e){return e.value===n.deviceType})[0].label),l.append("machineTypeCode",n.deviceType),l.append("machineNo",n.deviceNumber),l.append("machineName",n.deviceName),l.append("machineModel",n.deviceModel),l.append("dataUnit",n.deviceUnit),o.length>0&&l.append("imgFile",o[0].originFileObj),l.append("isFlag","1"),e.next=21,z.postFormData("/machineInfo/saveElectricityInfo",l);case 21:200===e.sent.code?(a.props.onOkClickedListener&&a.props.onOkClickedListener(),F.a.success("\u64cd\u4f5c\u6210\u529f\uff01")):F.a.error("\u6570\u636e\u63d0\u4ea4\u5931\u8d25\uff01"),a.setState({visible:!1,confirmLoading:!1,previewImage:"",fileList:[]}),e.next=27;break;case 26:F.a.error("\u8bf7\u68c0\u67e5\u8f93\u5165\u5185\u5bb9\u540e\u518d\u63d0\u4ea4\uff01");case 27:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.handlePreviewCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(){var e=Object(I.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,Ea(t.originFileObj);case 3:t.preview=e.sent;case 4:a.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.fileList,n=e.file,r=e.event;console.log("handleChange called",t,n,r),a.setState({fileList:t})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){console.log("componentWillMount called",this.props.selectedDeviceObj),this.setState({visibility:this.props.addDeviceModalVisible})}},{key:"componentDidMount",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r,i,l,o,c,s,u,d,p,m;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=W.get("user").companyCode,e.next=3,se(t);case 3:return(a=e.sent)&&200===a.code?(n=a.data,r=n.map(function(e,t){return{key:e.firstGroupCode,value:e.firstGroupCode,label:e.firstGroupName}}),this.setState({craftList:r})):a&&1010===a.code||F.a.error("\u83b7\u53d6\u5de5\u827a\u7c7b\u578b\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002"),e.next=7,pe();case 7:return(i=e.sent)&&200===i.code?(l=i.data,o=l.map(function(e,t){return{key:e.id,value:e.workCenterCode,label:e.workCenterName}}),this.setState({workCenterList:o})):i&&1010===i.code||F.a.error("\u83b7\u53d6\u5de5\u4f5c\u4e2d\u5fc3\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002"),e.next=11,ye({pageNum:0,pageSize:0,query:{}});case 11:if(!(c=e.sent)||200!==c.code){e.next=20;break}if((s=c.data.list).length){e.next=16;break}return e.abrupt("return");case 16:u=s.map(function(e,t){return{key:e.id,value:e.typeCode,label:e.typeName}}),this.setState({machineTypeList:u}),e.next=21;break;case 20:c&&1010===c.code||F.a.error("\u83b7\u53d6\u8bbe\u5907\u7c7b\u578b\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 21:return e.next=23,ne("/electricity/findlist",{deviceId:void 0,isFlag:void 0});case 23:(d=e.sent)&&200===d.code&&(p=d.data,m=p.map(function(e,t){return{key:e.id,value:e.deviceId,label:e.deviceId}}),this.setState({meterList:m}));case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e,t){if(console.log("componentWillReceiveProps called",e.selectedDeviceObj),e.addDeviceModalVisible!==this.props.addDeviceModalVisible&&(this.setState({visibility:e.addDeviceModalVisible}),e.addDeviceModalVisible)){var a=this.state,n=a.craftList,r=a.workCenterList,i=a.machineTypeList,l="";0===n.length&&(l+="\u3010\u5de5\u827a\u7c7b\u578b\u3011"),0===r.length&&(l+="\u3010\u5de5\u4f5c\u4e2d\u5fc3\u3011"),0===i.length&&(l+="\u3010\u751f\u4ea7\u8bbe\u5907\u7c7b\u578b\u3011"),""!==l&&F.a.warn("\u8bf7\u9996\u5148\u7ef4\u62a4 ".concat(l," \u5217\u8868\u3002"))}}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.selectedDeviceObj,n=e.plcTypeList,i=this.state.confirmLoading;console.log("===render===",a);var l=wa.get(a,"key"),o=wa.get(a,"belongingTechnique"),c=wa.get(a,"belongingCenterName"),s=wa.get(a,"plcType"),u=wa.get(a,"deviceTypeName"),d=wa.get(a,"deviceNumber"),p=wa.get(a,"deviceName"),m=wa.get(a,"deviceModel"),f=wa.get(a,"deviceUnit"),h=(wa.get(a,"electricityStr"),wa.get(a,"devicePic.url")),g=t.getFieldDecorator,b=(t.getFieldError,t.isFieldTouched,this.state),y=b.visibility,v=b.previewVisible,C=b.previewImage,k=b.fileList,O=b.craftList,w=b.machineTypeList,x=b.workCenterList,j=(b.meterList,r.a.createElement("div",null,r.a.createElement(Oa.a,{type:"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"\u6dfb\u52a0")));return console.log("this.state",this.state),r.a.createElement(dt.a,{title:l?"\u7f16\u8f91\u8bbe\u5907":"\u65b0\u589e\u8bbe\u5907",width:"50%",bodyStyle:{width:"100%"},visible:y,onOk:this.handleSubmit,confirmLoading:i,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(S.a,Object.assign({},ja,{onSubmit:this.handleSubmit}),r.a.createElement(S.a.Item,{label:"\u5f52\u5c5e\u5de5\u827a:"},g("belongingTechnique",O.length>0&&O.findIndex(function(e){return e.label===o})>-1?{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5f52\u5c5e\u5de5\u827a!"}],initialValue:O.filter(function(e){return e.label===o})[0].value}:{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5f52\u5c5e\u5de5\u827a!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u5f52\u5c5e\u5de5\u827a",autoClearSearchValue:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},O.map(function(e){return r.a.createElement(xa,{key:e.key,value:e.value},e.label)})))),r.a.createElement(S.a.Item,{label:"\u5f52\u5c5e\u5de5\u4f5c\u4e2d\u5fc3:"},g("belongingCenterName",x.length>0&&x.findIndex(function(e){return e.label===c})>-1?{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5f52\u5c5e\u5de5\u4f5c\u4e2d\u5fc3!"}],initialValue:x.filter(function(e){return e.label===c})[0].value}:{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5f52\u5c5e\u5de5\u4f5c\u4e2d\u5fc3!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u5f52\u5c5e\u5de5\u4f5c\u4e2d\u5fc3",autoClearSearchValue:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},x.map(function(e){return r.a.createElement(xa,{key:e.key,value:e.value},e.label)})))),r.a.createElement(S.a.Item,{label:"\u8bbe\u5907\u7c7b\u578b:"},g("deviceType",w.length>0&&w.findIndex(function(e){return e.label===u})>-1?{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0!"}],initialValue:w.filter(function(e){return e.label===u})[0].value}:{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0",autoClearSearchValue:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},w.map(function(e){return r.a.createElement(xa,{key:e.key,value:e.value},e.label)})))),r.a.createElement(S.a.Item,{label:"plc\u7c7b\u578b:"},g("plcType",n.length>0&&n.findIndex(function(e){return parseInt(e.value)===parseInt(s)})>-1?{rules:[{required:!0,message:"\u8bf7\u9009\u62e9plc\u7c7b\u578b!"}],initialValue:n.filter(function(e){return parseInt(e.value)===parseInt(s)})[0].value}:{rules:[{required:!0,message:"\u8bf7\u9009\u62e9plc\u7c7b\u578b!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9plc\u7c7b\u578b",autoClearSearchValue:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.map(function(e){return r.a.createElement(xa,{key:e.key,value:e.value},e.label)})))),r.a.createElement(S.a.Item,{label:"\u8bbe\u5907\u7f16\u53f7:"},g("deviceNumber",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bbe\u5907\u7f16\u53f7!"}],initialValue:d})(r.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u7f16\u53f7"}))),r.a.createElement(S.a.Item,{label:"\u8bbe\u5907\u540d\u79f0:"},g("deviceName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0!"}],initialValue:p})(r.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0"}))),r.a.createElement(S.a.Item,{label:"\u8bbe\u5907\u578b\u53f7:"},g("deviceModel",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bbe\u5907\u578b\u53f7!"}],initialValue:m})(r.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u578b\u53f7"}))),r.a.createElement(S.a.Item,{label:"\u8bbe\u5907\u5355\u4f4d:"},g("deviceUnit",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bbe\u5907\u5355\u4f4d!"}],initialValue:f})(r.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u5355\u4f4d"}))),r.a.createElement(S.a.Item,{label:"\u8bbe\u5907\u56fe\u7247:"},g("devicePic",{rules:[{required:!l||l&&!h,message:"\u8bf7\u6dfb\u52a0\u8bbe\u5907\u56fe\u7247!"}]})(r.a.createElement("div",null,r.a.createElement(ka.a,{className:"upload-style",accept:".jpeg,.jpg,.png,.bmp",listType:"picture-card",fileList:k,onPreview:this.handlePreview,onChange:this.handleChange},k.length>=1?null:j),r.a.createElement(dt.a,{title:"\u8bbe\u5907\u56fe\u7247\u67e5\u770b",visible:v,footer:null,onCancel:this.handlePreviewCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:C})))))))}}]),t}(n.Component),Na=S.a.create()(Sa),Da=a(114);function Ta(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})}var Fa=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={visibility:!1,previewImage:""},a.handleCancel=function(){console.log("Clicked cancel button"),a.setState({visibility:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.devicePicModalVisible,n=t.selectedDeviceObj,r=Da.get(n,"devicePic"),console.log("file",r),!r){e.next=9;break}if(r.url||r.preview){e.next=8;break}return e.next=7,Ta(r.originFileObj);case 7:r.preview=e.sent;case 8:this.setState({previewImage:r.url||r.preview,visibility:a});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(){var e=Object(I.a)(T.a.mark(function e(t,a){var n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.devicePicModalVisible===this.props.devicePicModalVisible){e.next=11;break}if(this.setState({visibility:t.devicePicModalVisible}),!t.devicePicModalVisible){e.next=11;break}if(n=t.selectedDeviceObj,!(r=Da.get(n,"devicePic"))){e.next=11;break}if(r.url||r.preview){e.next=10;break}return e.next=9,Ta(r.originFileObj);case 9:r.preview=e.sent;case 10:this.setState({previewImage:r.url||r.preview});case 11:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.visibility,a=e.previewImage,n=this.props.selectedDeviceObj,i=Da.get(n,"deviceName");return r.a.createElement(dt.a,{title:i||"\u67e5\u770b\u8bbe\u5907\u56fe\u7247",visible:t,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a}))}}]),t}(n.Component);function Ia(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  align-items: center;\n  height: 40px;\n  width: 30%;\n  // border: blue solid 2px;\n"]);return Ia=function(){return e},e}function Va(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  // flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 40px;\n  width: 70%;\n  // border: yellow solid 2px;\n"]);return Va=function(){return e},e}function La(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  width: 60%;\n  // border: red solid 2px;\n  padding: 0px 10px 6px 10px;\n"]);return La=function(){return e},e}function Ma(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  background-color: white;\n  height: 100%;\n  // border: #5a8cff 2px solid;\n"]);return Ma=function(){return e},e}function Pa(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]);return Pa=function(){return e},e}var Ra=a(114),qa=r.a.createContext(),Aa=N.a.Search,Ua=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.editing,e.dataIndex,e.title,e.record,e.index,Object(ya.a)(e,["editing","dataIndex","title","record","index"]));return r.a.createElement(qa.Consumer,null,function(e){return r.a.createElement("td",t,t.children)})}}]),t}(r.a.Component),za=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={visibility:!1,relatedData:null,immutableDataSet:null,unrelatedData:null,relatedColumns:[],unrelatedColumns:[],filterConditionObj:{meterNumber:""}},a.constructMockData=function(e){var t=[];if("related_data"===e)for(var a=0;a<10;a++)t.push({index:a+1,key:Ca()(),meterNumber:"223-".concat(a+1)});else for(var n=0;n<20;n++)t.push({index:n+1,key:Ca()(),meterNumber:"223-".concat(n+1)});return t},a.constructData=function(){var e=Object(I.a)(T.a.mark(function e(t,n){var r,i,l,o,c;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ra.get(n,"deviceNumber")){e.next=3;break}return e.abrupt("return");case 3:if(i={},l=[],"related_data"!==t){e.next=12;break}return e.next=8,a.callNetworkRequest({requestUrl:"/machineInfo/findElectricityRelatedList",params:Object.assign({},i,{machineNo:r}),requestMethod:"POST"});case 8:200===(o=e.sent).code&&o.data&&(l=o.data.map(function(e,t){return{index:t+1,key:Ca()(),dataId:e.id,meterNumber:e.electricityId}})),e.next=16;break;case 12:return e.next=14,a.callNetworkRequest({requestUrl:"/machineInfo/findNoElectricityRelatedList",params:Object.assign({},i,{pageNum:0,pageSize:0,query:{machineNo:r}}),requestMethod:"POST"});case 14:200===(c=e.sent).code&&c.data&&(l=c.data.list.map(function(e,t){return{index:t+1,key:Ca()(),dataId:e.id,meterNumber:e.electricityId}}));case 16:return console.log("===dataSet===",l),e.abrupt("return",l);case 18:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.constructTableFields=function(e){return Q.concat(a.getOperationFields(e))},a.getOperationFields=function(e){return[{title:"\u64cd\u4f5c",dataIndex:"operation",width:"15%",render:function(t,n){return r.a.createElement("div",null,r.a.createElement(Ba,null,r.a.createElement(ut,{type:"edit",customizedText:"related_data"===e?"\u53d6\u6d88\u5173\u8054":"\u786e\u8ba4\u5173\u8054",onClick:function(t){a.toggleRelationship(n,e),t.stopPropagation()}})))}}]},a.handleCancel=function(){console.log("Clicked cancel button"),a.setState({visibility:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.toggleRelationship=function(){var e=Object(I.a)(T.a.mark(function e(t,n){var r,i,l,o,c;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.selectedDeviceObj,i=Ra.get(r,"deviceNumber"),console.log("toggleRelationship called record, type =",t,n),l={machineNo:i,electricityId:t.meterNumber,flag:"unrelated_data"===n?"1":"0"},"related_data"===n&&(l=Object.assign({},l,{id:t.dataId})),e.next=7,a.callNetworkRequest({requestUrl:"/machineInfo/setMachineElectricityRelated",params:l,requestMethod:"POST"});case 7:if(o=e.sent,console.log("toggleRelationship originalContent = ",o),200!==o.code){e.next=22;break}return F.a.success("\u64cd\u4f5c\u6210\u529f\uff01"),e.next=13,a.constructData("unrelated_data",r);case 13:return c=e.sent,e.t0=a,e.next=17,a.constructData("related_data",r);case 17:e.t1=e.sent,e.t2=c,e.t3=c,e.t4={relatedData:e.t1,unrelatedData:e.t2,immutableDataSet:e.t3},e.t0.setState.call(e.t0,e.t4);case 22:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSearchCalled=function(){var e=a.state,t=e.immutableDataSet,n=e.filterConditionObj,r=n.meterNumber;console.log("onClickCalled1",t,n);var i=[];i=""!==r?t.filter(function(e){return e.meterNumber.indexOf(r)>-1}):t,console.log("onClickCalled2",i),a.setState({unrelatedData:i})},a.callNetworkRequest=function(){var e=Object(I.a)(T.a.mark(function e(t){var a,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.requestUrl,n=t.params,"POST"!==t.requestMethod){e.next=7;break}return e.next=4,z.post(a,n);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,z.get(a);case 9:r=e.sent;case 10:return console.log("request: ".concat(a),"params:",n,"result:",r),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.constructTableFields("related_data"),t=this.constructTableFields("unrelated_data");this.setState({relatedColumns:e,unrelatedColumns:t}),this.setState({visibility:this.props.meterRelationModalVisible})}},{key:"componentWillReceiveProps",value:function(){var e=Object(I.a)(T.a.mark(function e(t,a){var n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.meterRelationModalVisible!==this.props.meterRelationModalVisible&&this.setState({visibility:t.meterRelationModalVisible}),!t.meterRelationModalVisible){e.next=14;break}return n=t.selectedDeviceObj,e.next=5,this.constructData("unrelated_data",n);case 5:return r=e.sent,e.t0=this,e.next=9,this.constructData("related_data",n);case 9:e.t1=e.sent,e.t2=r,e.t3=r,e.t4={relatedData:e.t1,unrelatedData:e.t2,immutableDataSet:e.t3},e.t0.setState.call(e.t0,e.t4);case 14:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state||e!==this.props}},{key:"render",value:function(){var e=this,t=this.state,a=t.visibility,n=t.relatedData,i=t.unrelatedData,l=t.relatedColumns,o=t.unrelatedColumns,c={body:{cell:Ua}},s=l.map(function(e){return e.editable?Object(R.a)({},e,{onCell:function(t){return{record:t,dataIndex:e.dataIndex,title:e.title}}}):e}),u=o.map(function(e){return e.editable?Object(R.a)({},e,{onCell:function(t){return{record:t,dataIndex:e.dataIndex,title:e.title}}}):e});return r.a.createElement(dt.a,{title:"\u7535\u8868\u5173\u8054",width:"60%",bodyStyle:{width:"100%"},visible:a,footer:null,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(Za,null,r.a.createElement(Wa,null,r.a.createElement(Ya,{style:{width:"100%",justifyContent:"flex-start"}},r.a.createElement(Ka,{key:"tab5_1",placeHolder:"\u8bf7\u8f93\u5165\u7535\u8868\u7f16\u53f7",onSearchCalled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log("onSearchCalled called!",t),e.setState(function(e){return{filterConditionObj:Object.assign({},e.filterConditionObj,{meterNumber:t})}},function(){return e.onSearchCalled()})}})),r.a.createElement(Ja,null)),r.a.createElement(qa.Provider,{value:this.props.form},r.a.createElement(ct.a,{className:"data-board-mini-table-30",components:c,bordered:!1,dataSource:i,columns:u,pagination:{pageSize:5,showQuickJumper:!0},loading:null===i}),r.a.createElement("div",{style:{height:"1px",backgroundColor:"#ddd",width:"99%",margin:"0 0.5%"}}),r.a.createElement(ct.a,{className:"data-board-mini-table-70",title:function(){return"\u5df2\u5173\u8054\u7535\u8868"},components:c,bordered:!1,dataSource:n,columns:s,pagination:!1,scroll:{y:"calc((90vh)/10*3)"},loading:null===n}))))}}]),t}(n.Component),Ka=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.key!==this.props.key}},{key:"render",value:function(){var e=this.props,t=e.placeHolder,a=e.onSearchCalled;return r.a.createElement(Aa,{placeholder:t,enterButton:"\u67e5\u8be2",size:"default",onSearch:a})}}]),t}(n.Component),Ga=za,Ba=y.a.div(Pa()),Za=y.a.div(Ma()),Wa=y.a.div(La()),Ya=y.a.div(Va()),Ja=y.a.div(Ia());function Ha(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  align-items: center;\n  height: 40px;\n  width: 30%;\n  // border: blue solid 2px;\n"]);return Ha=function(){return e},e}function Qa(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  // flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 40px;\n  width: 70%;\n  // border: yellow solid 2px;\n"]);return Qa=function(){return e},e}function Xa(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  // border: red solid 2px;\n  padding: 0 0 10px 0;\n"]);return Xa=function(){return e},e}function _a(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  background-color: white;\n  height: calc(100vh - 130px);\n  // border: #5a8cff 2px solid;\n"]);return _a=function(){return e},e}function $a(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]);return $a=function(){return e},e}var en=r.a.createContext(),tn=st.a.Option,an=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.plcTypeList,a=(e.editing,e.dataIndex),n=(e.title,e.record),i=(e.index,Object(ya.a)(e,["plcTypeList","editing","dataIndex","title","record","index"])),l="plcType"===a&&t?t.filter(function(e){return parseInt(e.value)===parseInt(n[a])})[0]:null;return r.a.createElement(en.Consumer,null,function(e){return r.a.createElement("td",i,"isValid"===a?M.filter(function(e){return e.value===n[a]})[0].label:"plcType"===a&&t?l?l.label:"--":i.children)})}}]),t}(r.a.Component),nn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onDeviceTableSelectChange=function(e){console.log("onDeviceTableSelectChange called: ",e),a.setState({selectedRowKeys:e})},a.constructData=Object(I.a)(T.a.mark(function e(){var t,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNum:0,pageSize:0},n=[],e.next=4,a.callNetworkRequest({requestUrl:"/machineInfo/findlist",params:Object.assign({},t,{query:{}}),requestMethod:"POST"});case 4:return 200===(r=e.sent).code&&(console.log("==originalContent==",r),n=r.data.list.map(function(e,t){return{index:t+1,key:Ca()(),id:e.id,belongingTechniqueCode:e.firstGroupCode,belongingTechnique:e.firstGroupName,belongingCenterCode:e.workCenterCode,belongingCenterName:e.workCenterName,deviceTypeCode:e.machineTypeCode,deviceTypeName:e.machineTypeName,plcType:e.plcType,deviceNumber:e.machineNo,deviceName:e.machineName,deviceModel:e.machineModel,deviceUnit:e.dataUnit,devicePic:{uid:"-1",name:"device_pic.png",status:"done",url:e.imgUrl},isValid:e.isFlag||"1",electricityStr:e.electricityStr||"\u6682\u65e0"}})),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)})),a.constructMockData=function(){for(var e=[],t=0;t<15;t++)e.push({index:t+1,key:Ca()(),belongingTechniqueCode:"JIJIA",belongingTechnique:"\u673a\u52a0",belongingCenterCode:"CEnTER",belongingCenterName:"\u673a\u52a0\u5de5\u4f5c\u4e2d\u5fc3",deviceTypeCode:"Type-1",deviceTypeName:"\u6570\u63a7\u673a\u5e8a",plcType:1,deviceNumber:"PM"+(t+1),deviceName:"rm"+(t+1),deviceModel:"\u578b\u53f7I",deviceUnit:"\u5355\u4f4dI",devicePic:{uid:"-1",name:"xxx.png",status:"done",url:"http://pic18.nipic.com/20120204/8339340_144203764154_2.jpg"},isValid:t%2===0?"0":"1",electricityStr:"M-001,M-002,M-003"});return e},a.constructTableFields=function(){return H.concat(a.getOperationFields())},a.getOperationFields=function(){return[{title:"\u7535\u8868\u5173\u8054",dataIndex:"relatedMeter",width:"8%",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(sn,null,r.a.createElement("a",{style:{textDecoration:"underline"},onClick:function(e){a.showMeterRelations(t),e.stopPropagation()}},t.electricityStr)))}},{title:"\u8bbe\u5907\u56fe\u7247",dataIndex:"deviceView",width:"5%",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(sn,null,r.a.createElement(ut,{type:"duplicate",customizedText:"\u67e5\u770b",disabled:!t.devicePic.url||""===t.devicePic.url,onClick:function(e){a.showDevicePic(t),e.stopPropagation()}})))}},{title:"\u64cd\u4f5c",dataIndex:"operation",width:"5%",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(sn,null,r.a.createElement(ut,{type:"edit",onClick:function(e){a.edit(t),e.stopPropagation()}})))}}]},a.showMeterRelations=function(e){console.log("showMeterRelations called key=",e),a.setState({meterRelationModalVisible:!0,selectedDevice:e})},a.showDevicePic=function(e){console.log("showDevicePic called key=",e),a.setState({devicePicModalVisible:!0,selectedDevice:e})},a.edit=function(e){console.log("edit called key=",e),a.setState({addDeviceModalVisible:!0,selectedDevice:e})},a.addPart=function(e){console.log("addPart called key=",e),a.setState({addDeviceModalVisible:!0,selectedDevice:e})},a.toggleMachineValidation=function(){var e=Object(I.a)(T.a.mark(function e(t){var n,r,i,l,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state,r=n.selectedRowKeys,i=n.immutableDataSet,0!==r.length){e.next=4;break}return F.a.warning("\u8bf7\u52fe\u9009\u9700\u8981\u64cd\u4f5c\u7684\u884c\uff01"),e.abrupt("return");case 4:return l="",i.filter(function(e){return r.findIndex(function(t){return t===e.key})>-1}).map(function(e){return e.id}).forEach(function(e){""!==e&&(l+=e+",")}),e.next=9,a.callNetworkRequest({requestUrl:"/machineInfo/setFlagForMachineInfo",params:{ids:l,isFlag:t?"1":"0"},requestMethod:"POST"});case 9:if(200!==e.sent.code){e.next=17;break}return a.setState({showModal:!1,dataSet:null,immutableDataSet:null,selectedRowKeys:[]}),e.next=14,a.constructData();case 14:o=e.sent,a.setState({dataSet:o,immutableDataSet:o}),F.a.success("\u64cd\u4f5c\u6210\u529f\uff01");case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.callNetworkRequest=function(){var e=Object(I.a)(T.a.mark(function e(t){var a,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.requestUrl,n=t.params,"POST"!==t.requestMethod){e.next=7;break}return e.next=4,z.post(a,n);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,z.get(a);case 9:r=e.sent;case 10:return console.log("request: ".concat(a),"params:",n,"result:",r),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onModalCancelClickedListener=function(){a.setState({addDeviceModalVisible:!1,devicePicModalVisible:!1})},a.onAddEditDeviceModalOkClickedListener=function(){a.setState({addDeviceModalVisible:!1},Object(I.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.constructData();case 2:t=e.sent,a.setState({dataSet:t,immutableDataSet:t});case 4:case"end":return e.stop()}},e)})))},a.onMeterRelationModalCancelClickedListener=function(){a.setState({meterRelationModalVisible:!1},Object(I.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.constructData();case 2:t=e.sent,a.setState({dataSet:t,immutableDataSet:t}),a.onSearchCalled();case 5:case"end":return e.stop()}},e)})))},a.onSearchCalled=function(){var e=a.state,t=e.dataSet,n=e.immutableDataSet,r=e.filterConditionObj,i=r.deviceName,l=r.isValid;console.log("onClickCalled",t,r);var o=[];o=""!==i||""!==l?n.filter(function(e){return""!==i&&""!==l?e.deviceName.indexOf(i)>-1&&e.isValid===l:""!==i?e.deviceName.indexOf(i)>-1:""!==l?e.isValid===l:void 0}):n,console.log("onClickCalled",o),a.setState({dataSet:o})},a.state={dataSet:null,immutableDataSet:null,deviceColumns:[],addDeviceModalVisible:!1,devicePicModalVisible:!1,meterRelationModalVisible:!1,selectedDevice:{},selectedRowKeys:[],loading:!1,plcTypeList:[],filterConditionObj:{deviceName:"",isValid:""}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.constructTableFields();this.setState({deviceColumns:e})}},{key:"componentDidMount",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.constructData();case 2:return t=e.sent,this.setState({dataSet:t,immutableDataSet:t}),a=W.get("user").companyCode,e.next=7,ke({companyCode:a,type:"05"});case 7:n=e.sent,console.log("getPlcType called",n),n&&200===n.code?(r=n.data,i=r.map(function(e,t){return{key:e.codeCode,value:e.codeCode,label:e.codeName}}),this.setState({plcTypeList:i})):n&&1010===n.code||F.a.error("\u83b7\u53d6PLC\u8bbe\u5907\u7c7b\u578b\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e,t){if(this.props.tableType!==e.tableType){var a=this.constructTableFields();this.setState({deviceColumns:a})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataSet,n=t.selectedRowKeys,i=t.plcTypeList,l=t.deviceColumns,o=t.addDeviceModalVisible,c=t.devicePicModalVisible,s=t.meterRelationModalVisible,u=t.selectedDevice,d={selectedRowKeys:n,onChange:this.onDeviceTableSelectChange},p={body:{cell:an}},m=l.map(function(e){return Object(R.a)({},e,{onCell:function(t){return{record:t,dataIndex:e.dataIndex,title:e.title,plcTypeList:i}}})});return r.a.createElement("div",null,r.a.createElement(un,null,r.a.createElement(dn,null,r.a.createElement(pn,{style:{width:"100%",justifyContent:"flex-start"}},r.a.createElement(on,{key:"tab3_1",placeholder:"\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0",onCalled:function(t){var a=t.target.value;e.setState(function(e){return{filterConditionObj:Object.assign({},e.filterConditionObj,{deviceName:a})}})}}),r.a.createElement(rn,{key:"tab3_2",placeHolder:"\u9009\u62e9\u6709\u6548\u72b6\u6001",options:P,onChangeCalled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.setState(function(e){var a=M.filter(function(e){return e.value===t})[0];return a?{filterConditionObj:Object.assign({},e.filterConditionObj,{isValid:a.value})}:{filterConditionObj:Object.assign({},e.filterConditionObj,{isValid:""})}})}}),r.a.createElement(ln,{onClickCalled:this.onSearchCalled})),r.a.createElement(mn,null,r.a.createElement(E.a,{style:{marginRight:"10px"},type:"primary",onClick:function(){return e.addPart({})}},"\u65b0\u589e"),r.a.createElement(E.a,{style:{marginRight:"10px"},type:"primary",onClick:function(){return e.toggleMachineValidation(!0)}},"\u8bbe\u4e3a\u6709\u6548"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleMachineValidation(!1)}},"\u8bbe\u4e3a\u65e0\u6548"))),r.a.createElement(en.Provider,{value:this.props.form},r.a.createElement(ct.a,{className:"data-board-table",rowSelection:d,components:p,bordered:!1,dataSource:a,columns:m,rowClassName:"editable-row",pagination:{pageSize:15,showQuickJumper:!0,total:a&&a.length?a.length:0,showTotal:function(e){return"\u5171".concat(e,"\u6761")}},loading:null===a}))),r.a.createElement(Na,{addDeviceModalVisible:o,onOkClickedListener:this.onAddEditDeviceModalOkClickedListener,onCancelClickedListener:this.onModalCancelClickedListener,selectedDeviceObj:u,plcTypeList:i}),r.a.createElement(Fa,{devicePicModalVisible:c,selectedDeviceObj:u,onCancelClickedListener:this.onModalCancelClickedListener}),r.a.createElement(Ga,{meterRelationModalVisible:s,selectedDeviceObj:u,onCancelClickedListener:this.onMeterRelationModalCancelClickedListener}))}}]),t}(n.Component),rn=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.key!==this.props.key}},{key:"render",value:function(){var e=this.props,t=e.placeHolder,a=e.options,n=e.onChangeCalled;return r.a.createElement(st.a,{allowClear:!0,style:{width:"15%",marginRight:"6px"},placeholder:t,onChange:n},a.map(function(e){return r.a.createElement(tn,{key:e.key,value:e.value},e.label)}))}}]),t}(n.Component),ln=function(e){var t=e.onClickCalled;return r.a.createElement(E.a,{type:"primary",onClick:t},"\u67e5\u8be2")},on=function(e){var t=e.key,a=e.placeholder,n=e.onCalled;return r.a.createElement(N.a,{key:t,style:{width:"26%",marginRight:"6px"},placeholder:a,onChange:n,onPressEnter:n})},cn=S.a.create()(nn),sn=y.a.div($a()),un=y.a.div(_a()),dn=y.a.div(Xa()),pn=y.a.div(Qa()),mn=y.a.div(Ha()),fn=st.a.Option,hn={labelCol:{span:6},wrapperCol:{span:16}},gn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOk=function(e){var t=a.props.editDataObj,n=a.props.form.resetFields;a.props.form.validateFieldsAndScroll(function(){var e=Object(I.a)(T.a.mark(function e(r,i){var l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=6;break}return t.key&&(i.id=t.key),e.next=4,ge(i);case 4:(l=e.sent)&&200===l.code?a.props.onOkClickedListener&&(n(),a.props.onOkClickedListener(),F.a.success(l.data)):F.a.warning(l.msg);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleCancel=function(e){a.setState({visible:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.handleChangeValid=function(e){console.log("selected ".concat(e))},a.state={validValue:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editVisiable,a=e.editDataObj,n=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(dt.a,{title:"".concat(a.key?"\u7f16\u8f91\u96f6\u4ef6\u7c7b\u578b":"\u65b0\u589e\u96f6\u4ef6\u7c7b\u578b"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(S.a,{layout:"horizontal"},r.a.createElement(S.a.Item,Object.assign({label:"\u96f6\u4ef6\u7c7b\u578b\u7f16\u53f7"},hn),n("partTypeCode",{initialValue:a.partTypeCode||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f16\u53f7!"}]})(r.a.createElement(N.a,{disabled:!!a.key}))),r.a.createElement(S.a.Item,Object.assign({label:"\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0"},hn),n("partTypeName",{initialValue:a.partTypeName||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0!"}]})(r.a.createElement(N.a,null))),r.a.createElement(S.a.Item,Object.assign({label:"\u662f\u5426\u6709\u6548"},hn),n("isFlag",{initialValue:a.isFlag||"1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9"},r.a.createElement(fn,{value:"1"},"\u6709\u6548"),r.a.createElement(fn,{value:"0"},"\u65e0\u6548")))))))}}]),t}(n.Component),bn=S.a.create()(gn);function yn(){var e=Object(b.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n  .ant-btn{ margin-left: 10px; }\n"]);return yn=function(){return e},e}function vn(){var e=Object(b.a)(["\n  flex:2;\n"]);return vn=function(){return e},e}function Cn(){var e=Object(b.a)(["\n  margin-top: 15px;\n"]);return Cn=function(){return e},e}function kn(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  // border: aqua 2px solid;\n"]);return kn=function(){return e},e}var On=st.a.Option,wn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).constructTableFields=function(){return ee.concat(a.getOperationFields())},a.getOperationFields=function(){return[{title:"\u7f16\u8f91",key:"action",align:"center",render:function(e,t){return r.a.createElement(E.a,{type:"primary",size:"small",ghost:!0,onClick:function(e){return a.addEditPartType(t,e)}},"\u7f16\u8f91")}}]},a.toggleSetValidFun=function(){var e=Object(I.a)(T.a.mark(function e(t){var n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=a.state.chekboxSelectedRowKeys).length<=0)){e.next=6;break}return F.a.warning("\u8bf7\u52fe\u9009\u8981\u64cd\u4f5c\u7684\u884c\uff01"),e.abrupt("return");case 6:return e.next=8,be(n,t);case 8:(r=e.sent)&&200===r.code?(F.a.success("\u8bbe\u7f6e\u6210\u529f"),a.setState({chekboxSelectedRowKeys:[]}),a.getListDataFun()):F.a.warning("\u8bbe\u7f6e\u5931\u8d25\uff01");case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onPageChange=function(e,t){a.setState(function(t){return{pagination:Object.assign({},t.pagination,{pageNum:e})}},function(){a.getListDataFun()})},a.addEditPartType=function(e){console.log("edit:",e),a.setState({editVisiable:!0,editDataObj:e})},a.onModalOkClickedListener=function(){a.setState({editVisiable:!1}),a.getListDataFun()},a.onModalCancelClickedListener=function(){a.setState({editVisiable:!1})},a.state={partTypeColumn:[],listArr:[],filterConditionObj:{partTypeName:"",validValue:""},pagination:{pageNum:1,pageSize:15,total:0},editVisiable:!1,editDataObj:{},chekboxSelectedRowKeys:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.constructTableFields();this.setState({partTypeColumn:e})}},{key:"componentDidMount",value:function(){this.getListDataFun()}},{key:"getListDataFun",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r,i,l,o,c,s,u,d,p,m,f;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pagination,n=t.filterConditionObj,r=a.pageNum,i=a.pageSize,l=n.partTypeName,o=n.validValue,c={pageNum:r,pageSize:i,query:{partTypeName:l,isFlag:o}},e.next=6,he(c);case 6:(s=e.sent)&&200===s.code?(u=s.data.list,d=this.state.pagination,p=d.pageNum,m=d.pageSize,f=u.map(function(e,t){return{num:(p-1)*m+(t+1),key:e.id,partTypeCode:e.partTypeCode,partTypeName:e.partTypeName,isFlag:e.isFlag}}),this.setState(function(e){return{listArr:f,pagination:Object.assign({},e.pagination,{total:s.data.total})}})):F.a.error("\u83b7\u53d6\u52a0\u5de5\u96f6\u4ef6\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.partTypeColumn,n=t.listArr,i=t.filterConditionObj,l=t.editVisiable,o=t.editDataObj,c=t.pagination,s=t.chekboxSelectedRowKeys,u=c.pageNum,d=c.pageSize,p=c.total;console.log(u,d,p);var m={selectedRowKeys:s,onChange:function(t,a){e.setState({chekboxSelectedRowKeys:t})}};return r.a.createElement("div",null,r.a.createElement(Nn,null,r.a.createElement(Tn,null,r.a.createElement(xn,{placeholder:"\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0",onCalled:function(t){var a=t.target.value;e.setState({filterConditionObj:Object(R.a)({},i,{partTypeName:a})})}}),r.a.createElement(jn,{onCalled:function(t){e.setState({filterConditionObj:Object(R.a)({},i,{validValue:t})})}}),r.a.createElement(En,{onClickCalled:function(){e.setState({pagination:Object(R.a)({},c,{pageNum:1})},function(){e.getListDataFun()})}})),r.a.createElement(Fn,null,r.a.createElement(E.a,{type:"primary",onClick:function(){return e.addEditPartType({})}},"\u65b0\u589e"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleSetValidFun("1")}},"\u8bbe\u4e3a\u6709\u6548"),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.toggleSetValidFun("0")}},"\u8bbe\u4e3a\u65e0\u6548"))),r.a.createElement(Dn,null,r.a.createElement(ct.a,{className:"data-board-table",dataSource:n,columns:a,rowSelection:m,pagination:{total:p,showTotal:function(e){return"\u5171".concat(e,"\u6761")},pageSize:d,current:u,onChange:this.onPageChange}})),r.a.createElement(bn,{editVisiable:l,editDataObj:o,onOkClickedListener:this.onModalOkClickedListener,onCancelClickedListener:this.onModalCancelClickedListener}))}}]),t}(n.Component),xn=function(e){var t=e.placeholder,a=e.onCalled;return r.a.createElement(N.a,{placeholder:t,onChange:a,style:{width:"30%",marginRight:"6px"}})},jn=function(e){var t=e.onCalled;return r.a.createElement(st.a,{defaultValue:"",onChange:t,style:{width:"15%",marginRight:"6px"}},r.a.createElement(On,{value:""},"\u5168\u90e8"),r.a.createElement(On,{value:"1"},"\u6709\u6548"),r.a.createElement(On,{value:"0"},"\u65e0\u6548"))},En=function(e){var t=e.onClickCalled;return r.a.createElement(E.a,{type:"primary",onClick:t},"\u67e5\u8be2")},Sn=wn,Nn=y.a.div(kn()),Dn=y.a.div(Cn()),Tn=y.a.div(vn()),Fn=y.a.div(yn()),In=a(114),Vn=st.a.Option,Ln={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},Mn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={visibility:!1,partTypeList:[],machineList:[],machineNumber:"",partTypeCode:""},a.handleCancel=function(){console.log("Clicked cancel button"),a.setState({visibility:!1,machineNumber:"",partTypeCode:""}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.form,r=t.selectedPartObj,i=a.state,l=i.partTypeList,o=i.machineList,c=i.partTypeCode,s=i.machineNumber,u=In.get(r,"key"),d=In.get(r,"id");n.validateFields(function(){var e=Object(I.a)(T.a.mark(function e(t,n){var r,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleSubmit values",n),t){e.next=14;break}return r={},"/productInfo/save",a.setState({visible:!0,confirmLoading:!0}),r=Object.assign({},r,{partTypeCode:c,partTypeName:l.filter(function(e){return e.value===n.partTypeName})[0].label,partCode:n.partCode,partName:n.partName,machineNo:s,machineName:o.filter(function(e){return e.value===n.machineName})[0].label}),u&&(r=Object.assign({},r,{id:d,isFlag:n.isValid})),e.next=9,a.callNetworkRequest({requestUrl:"/productInfo/save",params:r,requestMethod:"POST"});case 9:i=e.sent,console.log("handleSubmit result",i),i&&200===i.code?(a.props.onOkClickedListener&&a.props.onOkClickedListener(),F.a.success("\u64cd\u4f5c\u6210\u529f\uff01"),a.setState({visible:!1,confirmLoading:!1,machineNumber:"",partTypeCode:""})):i&&1011===i.code?F.a.warning(i.msg):F.a.error("\u6570\u636e\u63d0\u4ea4\u5931\u8d25\uff01"),e.next=15;break;case 14:F.a.error("\u8bf7\u68c0\u67e5\u8f93\u5165\u5185\u5bb9\u540e\u518d\u63d0\u4ea4\uff01");case 15:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.callNetworkRequest=function(){var e=Object(I.a)(T.a.mark(function e(t){var a,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.requestUrl,n=t.params,"POST"!==t.requestMethod){e.next=7;break}return e.next=4,z.post(a,n);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,z.get(a);case 9:r=e.sent;case 10:return console.log("request: ".concat(a),"params:",n,"result:",r),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.addPartModalVisible;this.setState({visibility:e})}},{key:"componentDidMount",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post("/productType/find/all",{pageNum:0,pageSize:0,query:{isFlag:"",partTypeName:""}});case 2:return(t=e.sent)&&200===t.code?(a=t.data.list.map(function(e){return{key:"part_".concat(e.partTypeCode),value:e.partTypeCode,label:e.partTypeName}}),this.setState({partTypeList:a})):F.a.error("\u83b7\u53d6\u96f6\u4ef6\u7c7b\u578b\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002"),e.next=6,z.post("/machineInfo/findlist",{pageNum:0,pageSize:0,query:{}});case 6:200===(n=e.sent).code?(r=n.data.list.map(function(e){return{key:"machine_".concat(e.machineNo),value:e.machineNo,label:e.machineName}}),this.setState({machineList:r})):F.a.error("\u83b7\u53d6\u8bbe\u5907\u7c7b\u578b\u5217\u8868\u5931\u8d25\uff01\u8bf7\u7a0d\u5019\u91cd\u8bd5\u3002");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e,t){if(e.addPartModalVisible!==this.props.addPartModalVisible){var a=e.addPartModalVisible,n=e.selectedPartObj,r=In.get(n,"machineNumber",null),i=In.get(n,"partTypeCode",null);this.setState({visibility:a,machineNumber:r,partTypeCode:i})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,n=t.selectedPartObj,i=this.state.confirmLoading,l=In.get(n,"key"),o=In.get(n,"machineName"),c=In.get(n,"partTypeName"),s=In.get(n,"partCode",null),u=In.get(n,"partName",null),d=In.get(n,"isValid"),p=a.getFieldDecorator,m=a.getFieldError,f=a.isFieldTouched,h=this.state,g=h.visibility,b=h.machineList,y=h.partTypeList,v=h.machineNumber,C=h.partTypeCode;f("machineName")&&m("machineName"),f("partTypeName")&&m("partTypeName"),f("partCode")&&m("partCode"),f("partName")&&m("partName"),f("isValid")&&m("isValid");return r.a.createElement(dt.a,{title:l?"\u7f16\u8f91\u96f6\u4ef6":"\u65b0\u589e\u96f6\u4ef6",visible:g,onOk:this.handleSubmit,confirmLoading:i,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(S.a,Object.assign({},Ln,{onSubmit:this.handleSubmit}),r.a.createElement(S.a.Item,{label:"\u8bbe\u5907\u540d\u79f0:"},p("machineName",b.length>0&&b.findIndex(function(e){return e.label===o})>-1?{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bbe\u5907\u540d\u79f0!"}],initialValue:b.filter(function(e){return e.label===o})[0].value}:{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bbe\u5907\u540d\u79f0!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u8bbe\u5907\u540d\u79f0",autoClearSearchValue:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(t){e.setState({machineNumber:t})}},b.map(function(e){return r.a.createElement(Vn,{key:e.key,value:e.value},e.label)})))),r.a.createElement(S.a.Item,{label:"\u8bbe\u5907\u7f16\u53f7:"},r.a.createElement("div",{style:{lineHeight:"40px"}},v||"--")),r.a.createElement(S.a.Item,{label:"\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0:"},p("partTypeName",y.length>0&&y.findIndex(function(e){return e.label===c})>-1?{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0!"}],initialValue:y.filter(function(e){return e.label===c})[0].value}:{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u96f6\u4ef6\u7c7b\u578b\u540d\u79f0",autoClearSearchValue:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(t){e.setState({partTypeCode:t})}},y.map(function(e){return r.a.createElement(Vn,{key:e.key,value:e.value},e.label)})))),r.a.createElement(S.a.Item,{label:"\u96f6\u4ef6\u7c7b\u578b\u7f16\u53f7:"},r.a.createElement("div",{style:{lineHeight:"40px"}},C||"--")),r.a.createElement(S.a.Item,{label:"\u96f6\u4ef6\u540d\u79f0:"},p("partName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u96f6\u4ef6\u540d\u79f0!"}],initialValue:u})(r.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u96f6\u4ef6\u540d\u79f0"}))),r.a.createElement(S.a.Item,{label:"\u96f6\u4ef6\u7f16\u53f7:"},p("partCode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u96f6\u4ef6\u7f16\u53f7!"}],initialValue:s})(r.a.createElement(N.a,{disabled:!!l,style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u96f6\u4ef6\u7f16\u53f7"}))),l&&r.a.createElement(S.a.Item,{label:"\u662f\u5426\u6709\u6548:"},p("isValid",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6709\u6548\u72b6\u6001!"}],initialValue:d})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u6709\u6548\u72b6\u6001",autoClearSearchValue:!0},M.map(function(e){return r.a.createElement(Vn,{key:e.key,value:e.value},e.label)}))))))}}]),t}(n.Component),Pn=S.a.create()(Mn),Rn=(a(391),a(156)),qn=a(114),An=st.a.Option,Un={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},zn=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={visibility:!1},a.handleCancel=function(){console.log("Clicked cancel button"),a.setState({visibility:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.form,r=t.selectedProcedureObj,i=qn.get(r,"procedureKey"),l=qn.get(r,"id"),o=r.machineName,c=r.machineNumber,s=r.partTypeCode,u=r.partTypeName,d=r.partCode,p=r.partName;console.log("selectedPartObj",r),n.validateFieldsAndScroll(function(){var e=Object(I.a)(T.a.mark(function e(t,n){var r,m;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=15;break}return console.log("handleSubmit values",n),r={},"/productProcesses/save",a.setState({visible:!0,confirmLoading:!0}),r=Object.assign({},r,{machineNo:c,machineName:o,partTypeCode:s,partTypeName:u,partCode:d,partName:p,procedureName:n.stepName,processName:n.procedureName,processNo:n.procedureNumber,nomalTime:n.procedureProduceDuration,shortTime:n.procedureMinimumDuration}),i&&(r=Object.assign({},r,{id:l,isFlag:n.isValid})),e.next=9,a.callNetworkRequest({requestUrl:"/productProcesses/save",params:r,requestMethod:"POST"});case 9:m=e.sent,console.log("handleSubmit result",m),m&&200===m.code?(a.props.onOkClickedListener&&a.props.onOkClickedListener(),F.a.success("\u64cd\u4f5c\u6210\u529f\uff01")):F.a.error("\u6570\u636e\u63d0\u4ea4\u5931\u8d25\uff01"),a.setState({visible:!1,confirmLoading:!1}),e.next=16;break;case 15:F.a.error("\u8bf7\u68c0\u67e5\u8f93\u5165\u5185\u5bb9\u540e\u518d\u63d0\u4ea4\uff01");case 16:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.callNetworkRequest=function(){var e=Object(I.a)(T.a.mark(function e(t){var a,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.requestUrl,n=t.params,"POST"!==t.requestMethod){e.next=7;break}return e.next=4,z.post(a,n);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,z.get(a);case 9:r=e.sent;case 10:return console.log("request: ".concat(a),"params:",n,"result:",r),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.setState({visibility:this.props.addStepModalVisible})}},{key:"componentWillReceiveProps",value:function(e,t){e.addStepModalVisible!==this.props.addStepModalVisible&&this.setState({visibility:e.addStepModalVisible})}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.selectedProcedureObj,n=qn.get(a,"procedureKey"),i=qn.get(a,"partName",null),l=qn.get(a,"stepName",null),o=qn.get(a,"procedureNumber",null),c=qn.get(a,"procedureName",null),s=qn.get(a,"procedureProduceDuration"),u=qn.get(a,"procedureMinimumDuration"),d=qn.get(a,"isValid"),p=t.getFieldDecorator,m=t.getFieldError,f=t.isFieldTouched,h=this.state,g=h.visibility,b=h.confirmLoading;f("stepName")&&m("stepName"),f("procedureNumber")&&m("procedureNumber"),f("procedureName")&&m("procedureName"),f("procedureProduceDuration")&&m("procedureProduceDuration"),f("procedureMinimumDuration")&&m("procedureMinimumDuration"),f("isValid")&&m("isValid");return r.a.createElement(dt.a,{title:n?"\u7f16\u8f91\u7a0b\u5e8f":"\u65b0\u589e\u7a0b\u5e8f",visible:g,onOk:this.handleSubmit,confirmLoading:b,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(S.a,Object.assign({},Un,{onSubmit:this.handleSubmit}),r.a.createElement(S.a.Item,{label:"\u96f6\u4ef6\u540d\u79f0:"},r.a.createElement("div",null,i)),r.a.createElement(S.a.Item,{label:"\u7a0b\u5e8f\u540d\u79f0:"},p("stepName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7a0b\u5e8f\u540d\u79f0!"}],initialValue:l})(r.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u7a0b\u5e8f\u540d\u79f0"}))),r.a.createElement(S.a.Item,{label:"\u5de5\u5e8f\u53f7:"},p("procedureNumber",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u53f7!"}],initialValue:o})(r.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u53f7"}))),r.a.createElement(S.a.Item,{label:"\u5de5\u5e8f\u540d\u79f0:"},p("procedureName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u540d\u79f0!"}],initialValue:c})(r.a.createElement(N.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u540d\u79f0"}))),r.a.createElement(S.a.Item,{label:"\u5de5\u5e8f\u751f\u4ea7\u65f6\u95f4(\u5206):"},p("procedureProduceDuration",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u751f\u4ea7\u65f6\u95f4!"}],initialValue:s})(r.a.createElement(Rn.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u751f\u4ea7\u65f6\u95f4",min:1}))),r.a.createElement(S.a.Item,{label:"\u5de5\u5e8f\u6700\u77ed\u65f6\u95f4(\u5206):"},p("procedureMinimumDuration",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u6700\u77ed\u65f6\u95f4!"}],initialValue:u})(r.a.createElement(Rn.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u6700\u77ed\u65f6\u95f4",min:1}))),n&&r.a.createElement(S.a.Item,{label:"\u662f\u5426\u6709\u6548:"},p("isValid",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6709\u6548\u72b6\u6001!"}],initialValue:d})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u6709\u6548\u72b6\u6001",autoClearSearchValue:!0},M.map(function(e){return r.a.createElement(An,{key:e.key,value:e.value},e.label)}))))))}}]),t}(n.Component),Kn=S.a.create()(zn);function Gn(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  align-items: center;\n  height: 40px;\n  width: 100%;\n  // border: blue solid 2px;\n"]);return Gn=function(){return e},e}function Bn(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  // flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 40px;\n  width: 70%;\n  // border: yellow solid 2px;\n"]);return Bn=function(){return e},e}function Zn(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  // border: red solid 2px;\n"]);return Zn=function(){return e},e}function Wn(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  background-color: white;\n  height: calc(100vh - 130px);\n  // border: #5a8cff 2px solid;\n"]);return Wn=function(){return e},e}function Yn(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n"]);return Yn=function(){return e},e}var Jn=r.a.createContext(),Hn=st.a.Option,Qn=(a(114),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.factoryList,e.editing,e.dataIndex),a=(e.title,e.record),n=(e.index,Object(ya.a)(e,["factoryList","editing","dataIndex","title","record","index"]));return r.a.createElement(Jn.Consumer,null,function(e){return r.a.createElement("td",n,"isValid"===t?M.filter(function(e){return e.value===a[t]})[0].label:n.children)})}}]),t}(r.a.Component)),Xn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onPartTableSelectChange=function(e){console.log("onPartTableSelectChange called: ",e),a.setState({selectedRowKeysPartTable:e})},a.onProcedureTableSelectChange=function(e){console.log("onProcedureTableSelectChange called: ",e),a.setState({selectedRowKeysProcedureTable:e})},a.constructData=function(){var e=Object(I.a)(T.a.mark(function e(t,n){var r,i,l,o,c;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={pageNum:0,pageSize:0},i=[],"working_part"!==t){e.next=9;break}return e.next=5,a.callNetworkRequest({requestUrl:"/productInfo/find/all",params:Object.assign({},r,{query:{}}),requestMethod:"POST"});case 5:200===(l=e.sent).code&&(i=l.data.list.map(function(e,t){return{index:t+1,key:Ca()(),id:e.id,partTypeCode:e.partTypeCode,partTypeName:e.partTypeName,partCode:e.partCode||"--",partName:e.partName||"--",machineNumber:e.machineNo||"--",machineName:e.machineName,isValid:e.isFlag}})),e.next=17;break;case 9:if(o=[],!(n.length>0)){e.next=15;break}return e.next=13,a.callNetworkRequest({requestUrl:"/productProcesses/find/productinfoid",params:Object.assign({},r,{query:{productInfoId:n[0]}}),requestMethod:"POST"});case 13:200===(c=e.sent).code&&(o=o.concat(c.data.list));case 15:console.log("originalDatas",o),i=o.map(function(e,t){var a=Ca()();return{index:t+1,key:a,procedureKey:a,id:e.id,partTypeCode:e.partTypeCode,partTypeName:e.partTypeName,partCode:e.partCode,partName:e.partName,machineNumber:e.machineNo||"--",machineName:e.machineName,stepName:e.procedureName,procedureNumber:e.processNo,procedureName:e.processName,procedureProduceDuration:e.nomalTime,procedureMinimumDuration:e.shortTime,isValid:e.isFlag}});case 17:return console.log("===dataSet===",i),e.abrupt("return",i);case 19:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.constructTableFields=function(e){var t=[];switch(e){case"working_part":t=Y;break;case"working_step":t=J}return t.concat(a.getOperationFields(e))},a.getOperationFields=function(e){var t={title:"\u64cd\u4f5c",dataIndex:"operation",width:"10%",render:function(t,n){return r.a.createElement("div",null,r.a.createElement(ar,null,r.a.createElement(ut,{type:"edit",size:"small",onClick:function(t){a.edit(n,e),t.stopPropagation()}}),"working_part"===e&&r.a.createElement(ut,{type:"edit",customizedText:"\u65b0\u589e\u7a0b\u5e8f",onClick:function(e){a.addWorkingProcedure(n),e.stopPropagation()}})))}};return[t]},a.edit=function(e,t){console.log("edit called key=",e,t),"working_part"===t?a.setState({addPartModalVisible:!0,selectedPart:e}):a.setState({addStepModalVisible:!0,selectedProcedure:e})},a.addPart=function(e){console.log("addPart called key=",e),a.setState({addPartModalVisible:!0,selectedPart:e})},a.togglePartValidation=function(){var e=Object(I.a)(T.a.mark(function e(t){var n,r,i,l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state,r=n.selectedRowKeysPartTable,i=n.immutableDataSet,0!==r.length){e.next=4;break}return F.a.warning("\u8bf7\u52fe\u9009\u9700\u8981\u64cd\u4f5c\u7684\u884c\uff01"),e.abrupt("return");case 4:return e.next=6,a.callNetworkRequest({requestUrl:"/productInfo/update/isflag",params:{idArr:i.filter(function(e){return r.findIndex(function(t){return t===e.key})>-1}).map(function(e){return e.id}),isFlag:t?"1":"0"},requestMethod:"POST"});case 6:if(200!==e.sent.code){e.next=13;break}return a.setState({partData:null,immutableDataSet:null,selectedRowKeysPartTable:[]}),e.next=11,a.constructData("working_part");case 11:l=e.sent,a.setState({partData:l,immutableDataSet:l},Object(I.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.partData,e.t0=a,e.next=4,a.constructData("working_step",t.map(function(e){return e.id}));case 4:e.t1=e.sent,e.t2=t.length>0?t[0]:null,e.t3={stepData:e.t1,clickedPart:e.t2},e.t4=function(){a.onSearchCalled()},e.t0.setState.call(e.t0,e.t3,e.t4);case 9:case"end":return e.stop()}},e)})));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.addWorkingProcedure=function(e){console.log("addWorkingProcedure called key=",e),a.setState({addStepModalVisible:!0,selectedProcedure:e})},a.toggleProcedureValidation=function(){var e=Object(I.a)(T.a.mark(function e(t){var n,r,i,l,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state,r=n.selectedRowKeysProcedureTable,i=n.immutableDataSet,l=n.stepData,o=n.clickedPart,0!==r.length){e.next=4;break}return F.a.warning("\u8bf7\u52fe\u9009\u9700\u8981\u64cd\u4f5c\u7684\u884c\uff01"),e.abrupt("return");case 4:return e.next=6,a.callNetworkRequest({requestUrl:"productProcesses/update/isflag",params:{idArr:l.filter(function(e){return r.findIndex(function(t){return t===e.key})>-1}).map(function(e){return e.id}),isFlag:t?"1":"0"},requestMethod:"POST"});case 6:if(200!==e.sent.code){e.next=16;break}return a.setState({stepData:null,selectedRowKeysProcedureTable:[]}),e.t0=a,e.next=12,a.constructData("working_step",o?[o.id]:i.map(function(e){return e.id}));case 12:e.t1=e.sent,e.t2={stepData:e.t1},e.t0.setState.call(e.t0,e.t2),F.a.success("\u64cd\u4f5c\u6210\u529f\uff01");case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onRowClicked=function(){var e=Object(I.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,a.constructData("working_step",[t.id]);case 3:e.t1=e.sent,e.t2=t,e.t3={stepData:e.t1,clickedPart:e.t2},e.t0.setState.call(e.t0,e.t3);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.callNetworkRequest=function(){var e=Object(I.a)(T.a.mark(function e(t){var a,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.requestUrl,n=t.params,"POST"!==t.requestMethod){e.next=7;break}return e.next=4,z.post(a,n);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,z.get(a);case 9:r=e.sent;case 10:return console.log("request: ".concat(a),"params:",n,"result:",r),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddEditPartModalOkClickedListener=Object(I.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({addPartModalVisible:!1}),a.setState({partData:null,immutableDataSet:null,stepData:null}),e.next=4,a.constructData("working_part");case 4:t=e.sent,a.setState({partData:t,immutableDataSet:t},Object(I.a)(T.a.mark(function e(){var t,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.partData,t.clickedPart,e.t0=a,e.next=4,a.constructData("working_step",n.map(function(e){return e.id}));case 4:e.t1=e.sent,e.t2=n.length>0?n[0]:null,e.t3={stepData:e.t1,clickedPart:e.t2},e.t0.setState.call(e.t0,e.t3);case 8:case"end":return e.stop()}},e)}))),a.onSearchCalled();case 7:case"end":return e.stop()}},e)})),a.onAddEditStepModalOkClickedListener=Object(I.a)(T.a.mark(function e(){var t,n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({addStepModalVisible:!1}),a.setState({stepData:null}),t=a.state,n=t.partData,r=t.clickedPart,e.t0=a,e.next=6,a.constructData("working_step",r?[r.id]:n.map(function(e){return e.id}));case 6:e.t1=e.sent,e.t2={stepData:e.t1},e.t0.setState.call(e.t0,e.t2);case 9:case"end":return e.stop()}},e)})),a.onModalCancelClickedListener=function(){a.setState({addPartModalVisible:!1,addStepModalVisible:!1})},a.onSearchCalled=function(){var e=a.state,t=e.partData,n=e.immutableDataSet,r=e.filterConditionObj,i=r.partName,l=r.isValid;console.log("onClickCalled",t,r);var o=[];o=""!==i||""!==l?n.filter(function(e){return""!==i&&""!==l?e.partName.indexOf(i)>-1&&e.isValid===l:""!==i?e.partName.indexOf(i)>-1:""!==l?e.isValid===l:void 0}):n,console.log("onSearchCalled",o),a.setState({partData:o.map(function(e,t){return Object(R.a)({},e,{index:t+1})})},Object(I.a)(T.a.mark(function e(){var t,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,t.clickedPart,n=t.partData,e.t0=a,e.next=4,a.constructData("working_step",n.map(function(e){return e.id}));case 4:e.t1=e.sent,e.t2=n.length>0?n[0]:null,e.t3={stepData:e.t1,clickedPart:e.t2},e.t0.setState.call(e.t0,e.t3);case 8:case"end":return e.stop()}},e)})))},a.state={partData:null,immutableDataSet:null,stepData:null,clickedPart:null,partColumns:[],stepColumns:[],addPartModalVisible:!1,addStepModalVisible:!1,selectedPart:{},selectedProcedure:{},selectedRowKeysPartTable:[],selectedRowKeysProcedureTable:[],loading:!1,filterConditionObj:{partName:"",isValid:""}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.constructTableFields("working_part"),t=this.constructTableFields("working_step");this.setState({partColumns:e,stepColumns:t})}},{key:"componentDidMount",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a=this;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.constructData("working_part");case 2:t=e.sent,this.setState({partData:t,immutableDataSet:t},Object(I.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.partData,e.t0=a,e.next=4,a.constructData("working_step",t.map(function(e){return e.id}));case 4:e.t1=e.sent,e.t2=t.length>0?t[0]:null,e.t3={stepData:e.t1,clickedPart:e.t2},e.t0.setState.call(e.t0,e.t3);case 8:case"end":return e.stop()}},e)})));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e,t){if(this.props.tableType!==e.tableType){var a=this.constructTableFields("working_part"),n=this.constructTableFields("working_step");this.setState({partColumns:a,stepColumns:n})}}},{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state||e!==this.props}},{key:"render",value:function(){var e=this,t=this.state,a=t.partData,n=t.stepData,i=t.clickedPart,l=t.selectedRowKeysPartTable,o=t.selectedRowKeysProcedureTable,c=t.factoryList,s=t.partColumns,u=t.stepColumns,d=t.addPartModalVisible,p=t.selectedPart,m=t.addStepModalVisible,f=t.selectedProcedure,h={selectedRowKeys:l,onChange:this.onPartTableSelectChange},g={selectedRowKeys:o,onChange:this.onProcedureTableSelectChange},b={body:{cell:Qn}},y=s.map(function(e){return Object(R.a)({},e,{onCell:function(t){return{record:t,dataIndex:e.dataIndex,title:e.title,factoryList:c}}})}),v=u.map(function(e){return Object(R.a)({},e,{onCell:function(t){return{record:t,dataIndex:e.dataIndex,title:e.title,factoryList:c}}})});return r.a.createElement("div",null,r.a.createElement(nr,null,r.a.createElement(Jn.Provider,{value:this.props.form},r.a.createElement(ct.a,{className:"data-board-table-30",title:function(){return r.a.createElement(rr,null,r.a.createElement(ir,{style:{width:"100%",justifyContent:"flex-start"}},r.a.createElement(er,{key:"tab3_1",placeholder:"\u8bf7\u8f93\u5165\u96f6\u4ef6\u540d\u79f0",onCalled:function(t){var a=t.target.value;e.setState(function(e){return{filterConditionObj:Object.assign({},e.filterConditionObj,{partName:a})}})}}),r.a.createElement(_n,{key:"tab3_2",placeHolder:"\u9009\u62e9\u6709\u6548\u72b6\u6001",options:P,onChangeCalled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.setState(function(e){var a=M.filter(function(e){return e.value===t})[0];return a?{filterConditionObj:Object.assign({},e.filterConditionObj,{isValid:a.value})}:{filterConditionObj:Object.assign({},e.filterConditionObj,{isValid:""})}})}}),r.a.createElement($n,{onClickCalled:e.onSearchCalled})),r.a.createElement(lr,null,r.a.createElement(E.a,{style:{marginRight:"10px"},type:"primary",size:"default",onClick:function(){return e.addPart({})}},"\u65b0\u589e"),r.a.createElement(E.a,{style:{marginRight:"10px"},type:"primary",size:"default",onClick:function(){return e.togglePartValidation(!0)}},"\u8bbe\u4e3a\u6709\u6548"),r.a.createElement(E.a,{type:"primary",size:"default",onClick:function(){return e.togglePartValidation(!1)}},"\u8bbe\u4e3a\u65e0\u6548")))},rowSelection:h,rowClassName:function(e){return i&&e.key===i.key?"table-row-clicked":""},components:b,bordered:!1,dataSource:a,columns:y,pagination:{pageSize:6,showQuickJumper:!0,total:a&&a.length?a.length:0,showTotal:function(e){return"\u5171".concat(e,"\u6761")},onChange:function(){var t=Object(I.a)(T.a.mark(function t(a,n){var r,i;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.partData,console.log("onChange called : page",a,"pageSize",n,"partData",r),i=r.filter(function(e){return e.index===(a-1)*n+1})[0],t.t0=e,t.next=6,e.constructData("working_step",i?[i.id]:r.map(function(e){return e.id}));case 6:t.t1=t.sent,t.t2=i,t.t3={stepData:t.t1,clickedPart:t.t2},t.t0.setState.call(t.t0,t.t3);case 10:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},loading:null===a,onRow:function(t){return{onClick:function(a){e.onRowClicked(t)}}}}),r.a.createElement("div",{style:{height:"1px",backgroundColor:"#ddd",width:"99%",margin:"0 0.5%"}}),r.a.createElement(ct.a,{className:"data-board-table-70",title:function(){return r.a.createElement(rr,null,r.a.createElement(ir,{style:{width:"100%",justifyContent:"flex-start"}},r.a.createElement("div",{style:{fontWeight:"bold"}},"\u5f53\u524d\u96f6\u4ef6\uff1a".concat(i?"".concat(i.machineName," / ").concat(i.partTypeName," / ").concat(i.partName):"--"))),r.a.createElement(lr,null,r.a.createElement(E.a,{style:{marginRight:"10px"},type:"primary",size:"default",onClick:function(){return e.toggleProcedureValidation(!0)}},"\u8bbe\u4e3a\u6709\u6548"),r.a.createElement(E.a,{type:"primary",size:"default",onClick:function(){return e.toggleProcedureValidation(!1)}},"\u8bbe\u4e3a\u65e0\u6548")))},rowSelection:g,components:b,bordered:!1,dataSource:n,columns:v,pagination:!1,scroll:{y:"calc((100vh - 330px)/10*5)"},loading:null===n}))),r.a.createElement(Pn,{addPartModalVisible:d,onOkClickedListener:this.onAddEditPartModalOkClickedListener,onCancelClickedListener:this.onModalCancelClickedListener,selectedPartObj:p}),r.a.createElement(Kn,{addStepModalVisible:m,onOkClickedListener:this.onAddEditStepModalOkClickedListener,onCancelClickedListener:this.onModalCancelClickedListener,selectedProcedureObj:f}))}}]),t}(n.Component),_n=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.key!==this.props.key}},{key:"render",value:function(){var e=this.props,t=e.placeHolder,a=e.options,n=e.onChangeCalled;return r.a.createElement(st.a,{size:"default",allowClear:!0,style:{width:"20%",marginRight:"6px"},placeholder:t,onChange:n},a.map(function(e){return r.a.createElement(Hn,{key:e.key,value:e.value},e.label)}))}}]),t}(n.Component),$n=function(e){var t=e.onClickCalled;return r.a.createElement(E.a,{type:"primary",size:"default",onClick:t},"\u67e5\u8be2")},er=function(e){var t=e.key,a=e.placeholder,n=e.onCalled;return r.a.createElement(N.a,{key:t,size:"default",style:{width:"40%",marginRight:"6px"},placeholder:a,onChange:n,onPressEnter:n})},tr=S.a.create()(Xn),ar=y.a.div(Yn()),nr=y.a.div(Wn()),rr=y.a.div(Zn()),ir=y.a.div(Bn()),lr=y.a.div(Gn()),or=(a(394),a(218)),cr=a(28),sr=a.n(cr),ur=st.a.Option,dr={labelCol:{span:6},wrapperCol:{span:16}},pr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getDeviceOptionsFun=Object(I.a)(T.a.mark(function e(){var t,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe({pageNum:0,pageSize:0,query:{isFlag:1}});case 2:(t=e.sent)&&200===t.code&&(n=t.data.list,a.deviceOptions=n.map(function(e){return{id:e.id+Math.random(),label:e.machineName,value:e.machineNo}}));case 4:case"end":return e.stop()}},e)})),a.getPartTypeOptionsFun=Object(I.a)(T.a.mark(function e(){var t,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he({pageNum:0,pageSize:0,query:{isFlag:1}});case 2:(t=e.sent)&&200===t.code&&(n=t.data.list,a.partTypeOptions=n.map(function(e){return{id:e.id+Math.random(),label:e.partTypeName,value:e.partTypeCode}}));case 4:case"end":return e.stop()}},e)})),a.getPartOptionsFun=function(){var e=Object(I.a)(T.a.mark(function e(t,n,r){var i,l,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je({machineNo:t,partTypeCode:n});case 2:i=e.sent,l=[],i&&200===i.code&&i.data.length&&(o=i.data,l=o.map(function(e){return{id:e.id+Math.random(),label:e.partName,value:e.partCode}})),a.setState({partOptions:l},function(){r?a.getPartValue(r):a.getPartValue()});case 6:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.getPartValue=function(e){var t=a.state.partOptions,n="";e&&t.forEach(function(t){t.value===e&&(n=t.value)}),console.log("la88888888:",n),a.setState({partCode:n}),a.props.form.setFieldsValue({partCode:n})},a.handleOk=function(e){var t=a.props.editDataObj,n=a.props.form.resetFields;a.props.form.validateFieldsAndScroll(function(){var e=Object(I.a)(T.a.mark(function e(r,i){var l,o,c,s,u;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=16;break}return l=Object(R.a)({},i,{planDate:i.planDate.format("YYYY-MM-DD")}),console.log("value22:",l),o=l.machineNo,a.deviceOptions.forEach(function(e){e.value===o&&(l.machineName=e.label)}),c=l.partTypeCode,a.partTypeOptions.forEach(function(e){e.value===c&&(l.partTypeName=e.label)}),s=l.partCode,a.state.partOptions.forEach(function(e){e.value===s&&(l.partName=e.label)}),console.log("values:",l),t.key&&(l.id=t.key),e.next=13,we(l);case 13:(u=e.sent)&&200===u.code&&a.props.onOkClickedListener&&(n(),a.props.onOkClickedListener()),F.a.warning(u.msg);case 16:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.handleCancel=function(e){a.setState({visible:!1}),a.props.onCancelClickedListener&&a.props.onCancelClickedListener()},a.handleSelectChange=function(e){console.log("deviceOptValue:",e),a.setState({deviceOptionsValue:e},function(){var e=a.state,t=e.deviceOptionsValue,n=e.partTypeOptionsValue;console.log("\u8bbe\u5907\u540d\u79f0\u4e0b\u62c9\u56de\u8c03:",t,n),t&&n&&(console.log("===22",t,n),a.getPartOptionsFun(t,n))})},a.handleSelectChangePartType=function(){var e=Object(I.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({partTypeOptionsValue:t},function(){var e=a.state,t=e.deviceOptionsValue,n=e.partTypeOptionsValue;t&&n&&(console.log("\u52a0\u5de5\u96f6\u4ef6\u7c7b\u578b\u4e0b\u62c9\u56de\u8c03:",t,n),a.getPartOptionsFun(t,n))});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSelectChangePart=function(e){console.log("PartOptValue:",e)},a.deviceOptions=[],a.partTypeOptions=[],a.state={validValue:"",partOptions:[],deviceOptionsValue:"",partTypeOptionsValue:"",partCode:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.getDeviceOptionsFun(),this.getPartTypeOptionsFun()}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){if(e.editVisiable!==this.props.editVisiable){var t=e.editDataObj;t.key?(this.setState({deviceOptionsValue:t.machineNo,partTypeOptionsValue:t.partTypeCode}),this.getPartOptionsFun(t.machineNo,t.partTypeCode,t.partCode)):this.setState({partOptions:[],partCode:""})}}},{key:"render",value:function(){var e=this.props,t=e.editVisiable,a=e.editDataObj,n=this.props.form.getFieldDecorator;console.log("editDataObj:",a);var i=this.state,l=i.partOptions,o=i.deviceOptionsValue,c=i.partTypeOptionsValue,s=i.partCode;return r.a.createElement("div",null,r.a.createElement(dt.a,{title:"".concat(a.key?"\u7f16\u8f91\u751f\u4ea7\u8ba1\u5212":"\u65b0\u589e\u751f\u4ea7\u8ba1\u5212"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0},r.a.createElement(S.a,{layout:"horizontal"},r.a.createElement(S.a.Item,Object.assign({label:"\u65e5\u671f"},dr),n("planDate",{initialValue:a.planDate?sr()(a.planDate,"YYYY-MM-DD"):sr()(new Date,"YYYY-MM-DD"),rules:[{type:"object",required:!0,message:"\u8bf7\u9009\u62e9\u65e5\u671f!"}]})(r.a.createElement(or.a,{format:"YYYY-MM-DD",style:{display:"block"}}))),r.a.createElement(S.a.Item,Object.assign({label:"\u8bbe\u5907\u540d\u79f0"},dr),n("machineNo",{initialValue:a.machineNo,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bbe\u5907!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u8bbe\u5907",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:this.handleSelectChange},this.deviceOptions.map(function(e){return r.a.createElement(ur,{value:e.value,key:e.id},e.label)})))),r.a.createElement(S.a.Item,Object.assign({label:"\u52a0\u5de5\u96f6\u4ef6\u7c7b\u578b"},dr),n("partTypeCode",{initialValue:a.partTypeCode,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u52a0\u5de5\u96f6\u4ef6\u7c7b\u578b!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9\u52a0\u5de5\u96f6\u4ef6\u7c7b\u578b",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:this.handleSelectChangePartType},this.partTypeOptions.map(function(e){return r.a.createElement(ur,{value:e.value,key:e.id},e.label)})))),r.a.createElement(S.a.Item,Object.assign({label:"\u96f6\u4ef6\u540d\u79f0"},dr),n("partCode",{initialValue:s||"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u96f6\u4ef6!"}]})(r.a.createElement(st.a,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},placeholder:"\u8bf7\u9009\u62e9\u96f6\u4ef6",disabled:!o||!c,onChange:this.handleSelectChangePart},l.length&&l.map(function(e){return r.a.createElement(ur,{value:e.value,key:e.id},e.label)})))),r.a.createElement(S.a.Item,Object.assign({label:"\u767d\u73ed\u8ba1\u5212\u751f\u4ea7\u6570"},dr),n("planNumDay",{initialValue:a.planNumDay||"",rules:[{required:!0,message:"\u767d\u73ed\u8ba1\u5212\u751f\u4ea7\u6570!"}]})(r.a.createElement(Rn.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u767d\u73ed\u8ba1\u5212\u751f\u4ea7\u6570",min:1}))),r.a.createElement(S.a.Item,Object.assign({label:"\u591c\u73ed\u8ba1\u5212\u751f\u4ea7\u6570"},dr),n("planNumNight",{initialValue:a.planNumNight||"",rules:[{required:!0,message:"\u591c\u73ed\u8ba1\u5212\u751f\u4ea7\u6570!"}]})(r.a.createElement(Rn.a,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u591c\u73ed\u8ba1\u5212\u751f\u4ea7\u6570",min:1}))),r.a.createElement(S.a.Item,Object.assign({label:"\u662f\u5426\u6709\u6548"},dr),n("isFlag",{initialValue:a.isFlag||"1",rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}]})(r.a.createElement(st.a,{placeholder:"\u8bf7\u9009\u62e9"},r.a.createElement(ur,{value:"1"},"\u6709\u6548"),r.a.createElement(ur,{value:"0"},"\u65e0\u6548")))))))}}]),t}(n.Component),mr=S.a.create()(pr);function fr(){var e=Object(b.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n  .ant-btn{ margin-left: 10px; }\n"]);return fr=function(){return e},e}function hr(){var e=Object(b.a)(["\n  flex:1;\n"]);return hr=function(){return e},e}function gr(){var e=Object(b.a)(["\n  margin-top: 15px;\n"]);return gr=function(){return e},e}function br(){var e=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  // border: aqua 2px solid;\n"]);return br=function(){return e},e}var yr=new(a(411).EventEmitter),vr={accept:".xls,.xlsx",name:"file",showUploadList:!1,multiple:!1,onStart:function(e){},onSuccess:function(e,t){"500"===e.ret?F.a.error(e.msg):200===e.code&&(F.a.success("\u6570\u636e\u5bfc\u5165\u6210\u529f\uff01"),yr.emit("refresh_data"))},onError:function(e){},onProgress:function(e,t){e.percent},customRequest:function(e){e.action,e.data;var t=e.file,a=(e.filename,e.headers,e.onError),n=e.onProgress,r=e.onSuccess,i=(e.withCredentials,new FormData);i.append("uploadFile",t),function(e,t){return ie("/machineworkingplanMain/save/upload",e,t)}(i,n).then(function(e){var a=e.data;r(a,t)}).catch(a)}},Cr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).constructTableFields=function(){return $.concat(a.getOperationFields())},a.getOperationFields=function(){return[{title:"\u7f16\u8f91",key:"action",align:"center",render:function(e,t){return r.a.createElement(E.a,{type:"primary",disabled:!(0===t.overNum&&0===t.overNumDay&&0===t.overNumNight),ghost:!0,onClick:function(e){return a.addPlan(t,e)}},"\u7f16\u8f91")}}]},a.onDateChange=function(e,t){a.setState(function(e){return{filterConditionObj:Object.assign({},e.filterConditionObj,{dateStr:t})}})},a.searchFun=function(){a.setState(function(e){return{pagination:Object.assign({},e.pagination,{pageNum:1})}},function(){a.getListDataFun()})},a.addPlan=function(e){console.log("edit:",e),a.setState({editVisiable:!0,editDataObj:e})},a.onModalOkClickedListener=function(){a.setState({editVisiable:!1}),a.getListDataFun()},a.onModalCancelClickedListener=function(){a.setState({editVisiable:!1})},a.delFun=Object(I.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.chekboxSelectedRowKeys,console.log("chekboxSelectedRowKeys:",t),!(t.length<=0)){e.next=5;break}return F.a.warning("\u8bf7\u52fe\u9009\u8981\u64cd\u4f5c\u7684\u884c\uff01"),e.abrupt("return");case 5:dt.a.confirm({title:"\u786e\u8ba4\u5220\u9664?",onOk:function(){var e=Object(I.a)(T.a.mark(function e(){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(t);case 2:(n=e.sent)&&200===n.code?(F.a.success("\u5220\u9664\u6210\u529f\uff01"),a.getListDataFun()):F.a.error("\u5220\u9664\u5931\u8d25\uff01");case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){}});case 6:case"end":return e.stop()}},e)})),a.importTemplateFun=Object(I.a)(T.a.mark(function e(){var t,n,r,i,l;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.filterConditionObj.dateStr?a.state.filterConditionObj.dateStr:sr()(new Date).format("YYYY-MM-DD"),e.next=3,Se({companyCode:a.companyCode,planDate:t});case 3:n=e.sent,r=new Blob([n],{type:"application/vnd.ms-excel"}),i=t+"\u65e5\u751f\u4ea7\u8ba1\u5212.xlsx","download"in document.createElement("a")?((l=document.createElement("a")).download=i,l.style.display="none",l.href=URL.createObjectURL(r),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)):navigator.msSaveBlob(r,i);case 7:case"end":return e.stop()}},e)})),a.onPageNumChange=function(e,t){a.setState(function(t){return{pagination:Object.assign({},t.pagination,{pageNum:e})}},function(){a.getListDataFun()})},a.companyCode="",a.state={producePlanColumn:[],listArr:[],filterConditionObj:{dateStr:""},pagination:{pageNum:1,pageSize:10,total:0},editVisiable:!1,editDataObj:{},chekboxSelectedRowKeys:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.constructTableFields();this.setState({producePlanColumn:e}),this.companyCode=W.get("user").companyCode}},{key:"componentDidMount",value:function(){var e=this;this.getListDataFun(),this.eventE1=yr.addListener("refresh_data",Object(I.a)(T.a.mark(function t(){return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getListDataFun();case 1:case"end":return t.stop()}},t)})))}},{key:"componentWillUnmount",value:function(){yr.removeAllListeners()}},{key:"getListDataFun",value:function(){var e=Object(I.a)(T.a.mark(function e(){var t,a,n,r,i,l,o,c,s;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.filterConditionObj,n=t.pagination,r=n.pageNum,i=n.pageSize,n.total,l={pageNum:r,pageSize:i,query:{planDate:a.dateStr,companyCode:this.companyCode}},e.next=5,Oe(l);case 5:(o=e.sent)&&200===o.code&&(c=o.data.list,[],s=c.map(function(e,t){var a=sr()(e.planDate).format("YYYY/MM/DD").split("/").join("-");return{num:(r-1)*i+(t+1),key:e.id,planDate:a,machineNo:e.machineNo,machineName:e.machineName,partTypeName:e.partTypeName,partTypeCode:e.partTypeCode,partCode:e.partCode,partName:e.partName,planNumDay:e.planNumDay,overNumDay:e.overNumDay,planNumNight:e.planNumNight,overNumNight:e.overNumNight,overNum:e.overNum,isFlag:e.isFlag}}),console.log("dataSource:",s),this.setState(function(e){return{listArr:s,pagination:Object.assign({},e.pagination,{total:o.data.total})}}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.producePlanColumn,n=t.editVisiable,i=t.editDataObj,l=t.pagination,o=t.chekboxSelectedRowKeys,c=l.pageNum,s=l.pageSize,u=l.total,d={selectedRowKeys:o,onChange:function(t,a){console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a),e.setState({chekboxSelectedRowKeys:t})},getCheckboxProps:function(e){return{disabled:!(0===e.overNum&&0===e.overNumDay&&0===e.overNumNight)}}};return r.a.createElement("div",null,r.a.createElement(kr,null,r.a.createElement(wr,null,r.a.createElement(or.a,{onChange:this.onDateChange,style:{width:"40%",marginRight:"10px"}}),r.a.createElement(E.a,{type:"primary",onClick:this.searchFun},"\u67e5\u8be2")),r.a.createElement(xr,null,r.a.createElement(E.a,{type:"primary",onClick:this.importTemplateFun},"\u5bfc\u5165\u6a21\u677f\u4e0b\u8f7d"),r.a.createElement(ka.a,vr,r.a.createElement(E.a,{type:"primary"},"\u5bfc\u5165")),r.a.createElement(E.a,{type:"primary",onClick:function(){return e.addPlan({})}},"\u65b0\u589e"),r.a.createElement(E.a,{type:"primary",onClick:this.delFun},"\u5220\u9664"))),r.a.createElement(Or,null,r.a.createElement(ct.a,{className:"data-board-table",dataSource:this.state.listArr,columns:a,rowSelection:d,pagination:{current:c,pageSize:s,onChange:this.onPageNumChange,total:u,showTotal:function(e){return"\u5171".concat(e,"\u6761")}}})),r.a.createElement(mr,{editVisiable:n,editDataObj:i,onOkClickedListener:this.onModalOkClickedListener,onCancelClickedListener:this.onModalCancelClickedListener}))}}]),t}(n.Component),kr=y.a.div(br()),Or=y.a.div(gr()),wr=y.a.div(hr()),xr=y.a.div(fr()),jr=Cr,Er=a(114);var Sr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={currentSelectedTab:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=W.get("selectedTabKey");this.setState({currentSelectedTab:e})}},{key:"componentWillReceiveProps",value:function(e){if(console.log("ADMIN ROUTE componentWillReceiveProps called",e,this.props),this.props!==e){var t=W.get("selectedTabKey");this.setState({currentSelectedTab:t})}}},{key:"render",value:function(){var e=this.state.currentSelectedTab,t=Er.get(e,"key");return r.a.createElement(at,null,r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/admin",render:function(){if(t){var e=t.split("/"),a=e[e.length-1];return r.a.createElement(g.a,{to:"/admin/".concat(a)})}return r.a.createElement(g.a,{to:"/admin/ammeterInfo"})}}),r.a.createElement(g.b,{path:"/admin/ammeterInfo",exact:!0,component:jt}),r.a.createElement(g.b,{path:"/admin/craftType",exact:!0,component:Vt}),r.a.createElement(g.b,{path:"/admin/workCenter",exact:!0,component:Ht}),r.a.createElement(g.b,{path:"/admin/deviceType",exact:!0,component:ma}),r.a.createElement(g.b,{path:"/admin/deviceInfo",exact:!0,component:cn}),r.a.createElement(g.b,{path:"/admin/partsType",exact:!0,component:Sn}),r.a.createElement(g.b,{path:"/admin/partsInfo",exact:!0,component:tr}),r.a.createElement(g.b,{path:"/admin/producePaln",exact:!0,component:jr})))}}]),t}(r.a.Component),Nr=a(114),Dr=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={currentSelectedTab:"",loggedInUser:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("ROUTER INDEX componentDidMount called",this.props);var e=W.get("selectedTabKey"),t=W.get("user");this.setState({currentSelectedTab:e,loggedInUser:t})}},{key:"componentWillReceiveProps",value:function(e,t){if(console.log("ROUTER INDEX componentWillReceiveProps called",e,this.props),this.props!==e){var a=W.get("selectedTabKey"),n=W.get("user");this.setState({currentSelectedTab:a,loggedInUser:n})}}},{key:"render",value:function(){var e=this.state,t=e.currentSelectedTab,a=e.loggedInUser,n=Nr.get(t,"key"),i=Nr.get(a,"loginAccount");return console.log("ROUTER INDEX:",n,i),r.a.createElement(h.a,null,r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",exact:!0,render:function(){return console.log("router/index render called!",n,i),n&&i?r.a.createElement(g.a,{to:"".concat(n)}):r.a.createElement(g.a,{to:"/login"})}}),r.a.createElement(g.b,{path:"/login",exact:!0,component:Pe}),r.a.createElement(g.b,{path:"/test",exact:!0,component:O}),r.a.createElement(g.b,{path:"/admin",exact:!1,component:Sr}),r.a.createElement(g.b,{component:O})))}}]),t}(n.Component),Tr=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(o.a,{locale:f.a},r.a.createElement(Dr,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Tr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[416,1,2]]]);
//# sourceMappingURL=main.0341e00c.chunk.js.map